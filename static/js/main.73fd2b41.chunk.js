(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{136:function(e,t,n){},137:function(e,t,n){},140:function(e,t,n){},141:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(1),s=n.n(i),c=n(25),r=n.n(c),d=(n(93),n(53)),o=n(18),l=n(12),h=n(13),u=n(2),j=n(15),b=n(14),m=n(78),g=n.n(m).a.create({baseURL:"https://us-central1-test-l2sw.cloudfunctions.net/backend/"}),v=n.p+"static/media/icon.ea2967a8.png",p=n(154),O=n(155),x=n(153),f=n(80),C=n(86),y=n(5),k=n(6),S=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).LogOut=a.LogOut.bind(Object(u.a)(a)),a}return Object(h.a)(n,[{key:"LogOut",value:function(e){var t=this;console.log("logged out"),g.get("police/logout/",{params:{token:e}}).then((function(e){return e.data})).then((function(e){e.success&&t.props.handleLogOut()}))}},{key:"render",value:function(){var e=this,t=this.props.adminRights,n=this.props.token;return Object(a.jsxs)(p.a,{bg:"dark",variant:"dark",className:"d-flex",fixed:"top",children:[Object(a.jsxs)(p.a.Brand,{children:[Object(a.jsx)("img",{src:v,width:"30",height:"30",className:"d-inline-block align-top",alt:"RAPS icon"}),"\xa0 ",Object(a.jsx)("span",{className:"nav_brand_label",children:" Road Accident Prevention System "}),Object(a.jsx)("span",{className:"nav_brand_label_short",children:" RAPS "})]}),Object(a.jsxs)(O.a,{className:"d-flex justify-content-center",fill:!0,variant:"pills",children:[Object(a.jsxs)(x.a,{as:f.a,style:{display:t?"block":"none"},children:[Object(a.jsxs)(x.a.Toggle,{as:C.a,children:[Object(a.jsx)(y.a,{icon:k.p}),"\xa0",Object(a.jsx)("span",{className:"nav_item_label",children:" Police "})]}),Object(a.jsxs)(x.a.Menu,{children:[Object(a.jsx)(x.a.Item,{children:Object(a.jsxs)("button",{onClick:function(){return e.props.handleNavigation("addpolice")},className:"dropdown-item",children:[Object(a.jsx)(y.a,{icon:k.r}),"\xa0 Add User"]})}),Object(a.jsx)(x.a.Item,{children:Object(a.jsxs)("button",{onClick:function(){return e.props.handleNavigation("policelist")},className:"dropdown-item",children:[Object(a.jsx)(y.a,{icon:k.i}),"\xa0 User List"]})})]})]}),Object(a.jsxs)(x.a,{as:f.a,style:{display:t?"block":"none"},children:[Object(a.jsxs)(x.a.Toggle,{as:C.a,children:[Object(a.jsx)(y.a,{icon:k.a}),"\xa0",Object(a.jsx)("span",{className:"nav_item_label",children:" Emergency Teams "})]}),Object(a.jsxs)(x.a.Menu,{children:[Object(a.jsx)(x.a.Item,{children:Object(a.jsxs)("button",{onClick:function(){return e.props.handleNavigation("addeteam")},className:"dropdown-item",children:[Object(a.jsx)(y.a,{icon:k.r}),"\xa0 Add Emergency Team"]})}),Object(a.jsx)(x.a.Item,{children:Object(a.jsxs)("button",{onClick:function(){return e.props.handleNavigation("eteamlist")},className:"dropdown-item",children:[Object(a.jsx)(y.a,{icon:k.i}),"\xa0 Emergency Team List"]})})]})]}),Object(a.jsxs)(x.a,{as:f.a,children:[Object(a.jsxs)(x.a.Toggle,{as:C.a,children:[Object(a.jsx)(y.a,{icon:k.d}),"\xa0",Object(a.jsx)("span",{className:"nav_item_label",children:" Accidents "})]}),Object(a.jsxs)(x.a.Menu,{children:[Object(a.jsx)(x.a.Item,{children:Object(a.jsxs)("button",{onClick:function(){return e.props.handleNavigation("accidentsubmission")},className:"dropdown-item",children:[Object(a.jsx)(y.a,{icon:k.k}),"\xa0 Accident Submission"]})}),Object(a.jsx)(x.a.Item,{children:Object(a.jsxs)("button",{onClick:function(){return e.props.handleNavigation("accidentlist")},className:"dropdown-item",children:[Object(a.jsx)(y.a,{icon:k.i}),"\xa0 Accident List"]})})]})]}),Object(a.jsxs)(x.a,{as:f.a,children:[Object(a.jsxs)(x.a.Toggle,{as:C.a,children:[Object(a.jsx)(y.a,{icon:k.h}),"\xa0",Object(a.jsx)("span",{className:"nav_item_label",children:" Events "})]}),Object(a.jsxs)(x.a.Menu,{children:[Object(a.jsx)(x.a.Item,{children:Object(a.jsxs)("button",{onClick:function(){return e.props.handleNavigation("eventsubmission")},className:"dropdown-item",children:[Object(a.jsx)(y.a,{icon:k.k}),"\xa0 Event Submission"]})}),Object(a.jsx)(x.a.Item,{children:Object(a.jsxs)("button",{onClick:function(){return e.props.handleNavigation("eventlist")},className:"dropdown-item",children:[Object(a.jsx)(y.a,{icon:k.i}),"\xa0 Event List"]})})]})]}),Object(a.jsx)("div",{as:f.a,className:"",children:Object(a.jsxs)("a",{onClick:function(){return e.props.handleNavigation("incidentlist")},className:"nav-link",children:[Object(a.jsx)(y.a,{icon:k.g}),"\xa0",Object(a.jsx)("span",{className:"nav_item_label",children:" Incidents "})]})}),Object(a.jsx)("div",{as:f.a,className:"",children:Object(a.jsxs)("a",{onClick:function(){return e.props.handleNavigation("holiday")},className:"nav-link",children:[Object(a.jsx)(y.a,{icon:k.c}),"\xa0",Object(a.jsx)("span",{className:"nav_item_label",children:" Holidays "})]})})]}),Object(a.jsx)(O.a,{className:"ml-auto",children:Object(a.jsxs)(x.a,{as:f.a,children:[Object(a.jsxs)(x.a.Toggle,{as:C.a,children:[Object(a.jsx)(y.a,{icon:k.e}),"\xa0",Object(a.jsx)("span",{className:"nav_item_label",children:" "})]}),Object(a.jsxs)(x.a.Menu,{alignRight:!0,children:[Object(a.jsx)(x.a.Item,{children:Object(a.jsxs)("button",{onClick:this.LogOut.bind(this,n),className:"btn text-danger",children:[Object(a.jsx)(y.a,{icon:k.m}),Object(a.jsx)("span",{children:" Log Out "})]})}),Object(a.jsx)(x.a.Item,{children:Object(a.jsxs)("button",{onClick:function(){return e.props.handleNavigation("changepassword")},className:"btn",children:[Object(a.jsx)(y.a,{icon:k.q}),"\xa0 Change password"]})})]})]})})]})}}]),n}(i.Component),_=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onChangeUsername=a.onChangeUsername.bind(Object(u.a)(a)),a.onChangeName=a.onChangeName.bind(Object(u.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(u.a)(a)),a.onChangeAdminRights=a.onChangeAdminRights.bind(Object(u.a)(a)),a.onSubmit=a.onSubmit.bind(Object(u.a)(a)),a.state={username:"",name:"",password:"",password2:"",adminRights:!1,token:a.props.token,res:""},a}return Object(h.a)(n,[{key:"onChangeUsername",value:function(e){var t=e.target.value;/^[a-z0-9]*$/.test(t)&&this.setState({username:e.target.value,res:""})}},{key:"onChangeName",value:function(e){var t=e.target.value;/^[A-Za-z ]*$/.test(t)&&this.setState({name:e.target.value,res:""})}},{key:"onChangePassword",value:function(e,t){1==e?this.setState({password:t.target.value,res:""}):this.setState({password2:t.target.value,res:""})}},{key:"onChangeAdminRights",value:function(e){this.setState({adminRights:e.target.checked,res:""})}},{key:"onSubmit",value:function(e){var t=this;if(e.preventDefault(),this.state.password===this.state.password2){var n={username:this.state.username,name:this.state.name,password:this.state.password,adminRights:this.state.adminRights,sessionToken:this.state.token};g.post("police/signup",n).then((function(e){t.setState({res:e.data.message,username:"",name:"",password:"",password2:"",adminRights:!1})}))}else this.setState({res:"Passwords mismatched. Please re-check."})}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Create New User"}),Object(a.jsx)("form",{onSubmit:this.onSubmit,children:Object(a.jsxs)("div",{class:"form-col",children:[Object(a.jsxs)("div",{className:"form-group col-sm-9 col-md-7 col-lg-6 col-xl-4",children:[Object(a.jsx)("label",{children:"Username: "}),Object(a.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.username,onChange:this.onChangeUsername,minlength:"4",maxlength:"15"})]}),Object(a.jsxs)("div",{className:"form-group col-sm-9 col-md-7 col-lg-6 col-xl-4",children:[Object(a.jsx)("label",{children:"Name: "}),Object(a.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.name,onChange:this.onChangeName,minLength:"5",maxLength:"30"})]}),Object(a.jsxs)("div",{className:"form-group col-sm-9 col-md-7 col-lg-6 col-xl-4",children:[Object(a.jsx)("label",{children:"Password: "}),Object(a.jsx)("input",{type:"password",required:!0,className:"form-control",value:this.state.password,onChange:function(t){return e.onChangePassword(1,t)},minlength:"4",maxLength:"20"})]}),Object(a.jsxs)("div",{className:"form-group col-sm-9 col-md-7 col-lg-6 col-xl-4",children:[Object(a.jsx)("label",{children:"Re-Enter Password: "}),Object(a.jsx)("input",{type:"password",required:!0,className:"form-control",value:this.state.password2,onChange:function(t){return e.onChangePassword(2,t)},minlength:"4",maxLength:"20"})]}),Object(a.jsxs)("div",{className:"form-group col-sm-9 col-md-7 col-lg-6 col-xl-4",children:[Object(a.jsx)("input",{type:"checkbox",className:"form-check-input",value:this.state.adminRights,onChange:this.onChangeAdminRights}),Object(a.jsx)("label",{class:"form-check-label",children:"Admin Rights "})]}),Object(a.jsx)("div",{className:"form-group col-sm-9 col-md-7 col-lg-6 col-xl-4",children:Object(a.jsx)("input",{type:"submit",value:"Create User",className:"btn btn-primary"})})]})}),Object(a.jsx)("div",{children:this.state.res})]})}}]),n}(i.Component),N=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onChangeUsername=a.onChangeUsername.bind(Object(u.a)(a)),a.onChangeName=a.onChangeName.bind(Object(u.a)(a)),a.onChangeContactNumber=a.onChangeContactNumber.bind(Object(u.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(u.a)(a)),a.onSubmit=a.onSubmit.bind(Object(u.a)(a)),a.state={username:"",name:"",password:"",password2:"",contactNumber:"",token:a.props.token,res:""},a}return Object(h.a)(n,[{key:"onChangeUsername",value:function(e){var t=e.target.value;/^[a-z0-9]*$/.test(t)&&this.setState({username:e.target.value,res:""})}},{key:"onChangeName",value:function(e){var t=e.target.value;/^[A-Za-z0-9 ]*$/.test(t)&&this.setState({name:e.target.value,res:""})}},{key:"onChangeContactNumber",value:function(e){var t=e.target.value;/^[0-9]*$/.test(t)&&this.setState({contactNumber:e.target.value,res:""})}},{key:"onChangePassword",value:function(e,t){1==e?this.setState({password:t.target.value,res:""}):this.setState({password2:t.target.value,res:""})}},{key:"onSubmit",value:function(e){var t=this;if(e.preventDefault(),this.state.password===this.state.password2){var n={username:this.state.username,name:this.state.name,password:this.state.password,contactNumber:this.state.contactNumber,sessionToken:this.state.token};g.post("police/eteam/add",n).then((function(e){t.setState({res:e.data.message,username:"",name:"",password:"",password2:"",contactNumber:""})}))}else this.setState({res:"Passwords mismatched. Please re-check."})}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Create New Emergency Team"}),Object(a.jsx)("form",{onSubmit:this.onSubmit,children:Object(a.jsxs)("div",{class:"form-col",children:[Object(a.jsxs)("div",{className:"form-group col-sm-9 col-md-7 col-lg-6 col-xl-4",children:[Object(a.jsx)("label",{children:"Username: "}),Object(a.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.username,onChange:this.onChangeUsername,minlength:"4",maxlength:"15"})]}),Object(a.jsxs)("div",{className:"form-group col-sm-9 col-md-7 col-lg-6 col-xl-4",children:[Object(a.jsx)("label",{children:"Name: "}),Object(a.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.name,onChange:this.onChangeName,minLength:"5",maxLength:"30"})]}),Object(a.jsxs)("div",{className:"form-group col-sm-9 col-md-7 col-lg-6 col-xl-4",children:[Object(a.jsx)("label",{children:"Contact Number: "}),Object(a.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.contactNumber,onChange:this.onChangeContactNumber,minLength:"3",maxLength:"10"})]}),Object(a.jsxs)("div",{className:"form-group col-sm-9 col-md-7 col-lg-6 col-xl-4",children:[Object(a.jsx)("label",{children:"Password: "}),Object(a.jsx)("input",{type:"password",required:!0,className:"form-control",value:this.state.password,onChange:function(t){return e.onChangePassword(1,t)},minlength:"4",maxLength:"20"})]}),Object(a.jsxs)("div",{className:"form-group col-sm-9 col-md-7 col-lg-6 col-xl-4",children:[Object(a.jsx)("label",{children:"Re-Enter Password: "}),Object(a.jsx)("input",{type:"password",required:!0,className:"form-control",value:this.state.password2,onChange:function(t){return e.onChangePassword(2,t)},minlength:"4",maxLength:"20"})]}),Object(a.jsx)("div",{className:"form-group col-sm-9 col-md-7 col-lg-6 col-xl-4",children:Object(a.jsx)("input",{type:"submit",value:"Create Emergency Team",className:"btn btn-primary"})})]})}),Object(a.jsx)("div",{children:this.state.res})]})}}]),n}(i.Component),w=n(3),P=n.n(w),D=n(10),T=n(49),E=n.n(T),A=function(e){var t=e.itemsCount,n=e.pageSize,i=e.onPageChange,s=e.currentPage;console.log(s,t,n);var c=Math.ceil(t/n);if(1===c)return null;var r=E.a.range(1,c+1);return Object(a.jsx)("nav",{children:Object(a.jsx)("ul",{class:"pagination",children:r.map((function(e){return Object(a.jsx)("li",{class:e===s?"page-item active":"page-item",children:Object(a.jsx)("a",{class:"page-link",onClick:function(){return i(e)},children:e})},e)}))})})},I=function(){return Object(a.jsx)("div",{className:"d-flex justify-content-center mt-5",children:Object(a.jsx)("div",{className:"spinner-border",role:"status",children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})})})};function M(e,t,n){var a=(t-1)*n;return E()(e).slice(a).take(n).value()}var L=n(82),R=n.n(L),F=function(e){var t={Kottawa:{latitude:6.84049,longitude:79.980573},Kahathuduwa:{latitude:6.784015,longitude:79.980355},Gelanigama:{latitude:6.715369,longitude:80.000144},Dodangoda:{latitude:6.542138,longitude:80.043321},Welipanna:{latitude:6.453122,longitude:80.088722},Kurundugahahetekma:{latitude:6.271763,longitude:80.13916},Baddegama:{latitude:6.180164,longitude:80.19423},Pinnaduwa:{latitude:6.069075,longitude:80.264147},Imaduwa:{latitude:6.035074,longitude:80.36598},Kokmaduwa:{latitude:6.022619,longitude:80.432987},Godagama:{latitude:5.976512,longitude:80.518374}},n=null,a=null,i=null;for(var s in t){var c={latitude:t[s].latitude,longitude:t[s].longitude};if(i=R()(e,c,{unit:"km"}),null!==n&&a<i)return n;n=s,a=i}},K=function(e){var t=F({latitude:e.eteam.lat,longitude:e.eteam.lng});return e.eteam.username===e.edit_username?Object(a.jsxs)("tr",{className:"table-secondary",children:[Object(a.jsx)("td",{children:e.eteam.username}),Object(a.jsx)("td",{children:Object(a.jsx)("input",{type:"text",required:!0,className:"form-control",value:e.edit_name,onChange:e.onChangeName,minLength:"4",maxLength:"20"})}),Object(a.jsx)("td",{children:Object(a.jsx)("input",{type:"text",value:e.edit_contactNumber,onChange:e.onChangeContactNumber})}),Object(a.jsx)("td",{children:e.eteam.availability&&0!=e.eteam.lat&&0!=e.eteam.lng?(t||"")+" ("+e.eteam.lat+","+e.eteam.lng+")":"-"}),Object(a.jsxs)("td",{children:[Object(a.jsx)("button",{type:"submit",className:"btn btn-sm btn-secondary",onClick:function(){e.discardEdit()},children:Object(a.jsx)(y.a,{icon:k.b})}),"\xa0",Object(a.jsx)("button",{type:"submit",className:"btn btn-sm btn-success",onClick:function(){e.updateETeam(e.eteam.username,e.edit_name,e.edit_contactNumber)},children:Object(a.jsx)(y.a,{icon:k.l})})]})]}):Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:e.eteam.username}),Object(a.jsx)("td",{children:e.eteam.name}),Object(a.jsx)("td",{children:e.eteam.contactNumber}),Object(a.jsx)("td",{children:e.eteam.availability&&0!=e.eteam.lat&&0!=e.eteam.lng?(t||"")+" ("+e.eteam.lat+","+e.eteam.lng+")":"-"}),Object(a.jsxs)("td",{children:[Object(a.jsx)("button",{className:"btn btn-sm btn-info",onClick:function(){e.editETeam(e.eteam)},children:Object(a.jsx)(y.a,{icon:k.f})}),"\xa0",Object(a.jsx)("button",{className:"btn btn-sm btn-danger",onClick:function(){e.deleteETeam(e.eteam.username)},children:Object(a.jsx)(y.a,{icon:k.o})})]})]})},G=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).getList=Object(D.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("eteam/list");case 2:t=e.sent,a.setState({eteamlist:t.data.data,updateFlag:!1}),console.log("state_set:"),console.log(t.data.data);case 6:case"end":return e.stop()}}),e)}))),a.deleteETeam=a.deleteETeam.bind(Object(u.a)(a)),a.editETeam=a.editETeam.bind(Object(u.a)(a)),a.updateETeam=a.updateETeam.bind(Object(u.a)(a)),a.discardEdit=a.discardEdit.bind(Object(u.a)(a)),a.onChangeName=a.onChangeName.bind(Object(u.a)(a)),a.onChangeContactNumber=a.onChangeContactNumber.bind(Object(u.a)(a)),a.refresh=a.refresh.bind(Object(u.a)(a)),a.handlePageChange=a.handlePageChange.bind(Object(u.a)(a)),a.state={eteamlist:[],updateFlag:!0,edit_username:null,pageSize:a.props.pageSize,currentPage:1},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(D.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getList();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handlePageChange",value:function(e){this.setState({currentPage:e})}},{key:"componentDidUpdate",value:function(){var e=Object(D.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==this.state.updateFlag){e.next=3;break}return e.next=3,this.getList();case 3:console.log(this.state);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteETeam",value:function(){var e=Object(D.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.delete("police/eteam/delete/",{data:{username:t,sessionToken:this.props.token}}).then((function(e){console.log(e.data)}));case 2:this.setState({updateFlag:!0}),this.refresh();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateETeam",value:function(){var e=Object(D.a)(P.a.mark((function e(t,n,a){var i=this;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.post("police/eteam/update/",{username:t,name:n,contactNumber:a,sessionToken:this.props.token}).then((function(e){console.log(e.data),console.log("token:"+i.props.token)}));case 2:this.setState({updateFlag:!0,edit_username:null,edit_name:null,edit_contactNumber:null}),this.refresh();case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"editETeam",value:function(e){this.setState({edit_username:e.username,edit_name:e.name,edit_contactNumber:e.contactNumber,updateFlag:!0})}},{key:"discardEdit",value:function(){this.setState({edit_username:null,edit_name:null,edit_contactNumber:null,updateFlag:!0})}},{key:"refresh",value:function(){this.setState({updateFlag:!0})}},{key:"onChangeName",value:function(e){var t=e.target.value,n=/^[A-Za-z0-9 ]+$/;console.log(n.test(t)),n.test(t)&&this.setState({edit_name:e.target.value})}},{key:"onChangeContactNumber",value:function(e){var t=e.target.value;/^[0-9]+$/.test(t)&&this.setState({edit_contactNumber:e.target.value})}},{key:"eteamList",value:function(e){var t=this;return e.map((function(e){return Object(a.jsx)(K,{eteam:e,deleteETeam:t.deleteETeam,editETeam:t.editETeam,updateETeam:t.updateETeam,discardEdit:t.discardEdit,onChangeName:t.onChangeName,onChangeContactNumber:t.onChangeContactNumber,edit_username:t.state.edit_username,edit_name:t.state.edit_name,edit_contactNumber:t.state.edit_contactNumber},e.username)}))}},{key:"render",value:function(){var e=this,t=this.state.eteamlist.length,n=this.state,i=n.pageSize,s=n.currentPage,c=n.eteamlist;if(this.state.updateFlag)return Object(a.jsx)(I,{});if(0===t)return Object(a.jsx)("p",{children:"There are no ETeam Users in the database"});var r=M(c,s,i);return Object(a.jsxs)("div",{children:[Object(a.jsxs)("h3",{children:[" ",Object(a.jsx)(y.a,{icon:k.a})," ETeam List\xa0",Object(a.jsx)("button",{className:"btn btn-sm btn-light",onClick:function(){e.refresh()},children:Object(a.jsx)(y.a,{icon:k.n})})]}),Object(a.jsxs)("table",{className:"table",children:[Object(a.jsx)("thead",{className:"thead-light",children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Username"}),Object(a.jsx)("th",{children:"Name"}),Object(a.jsx)("th",{children:"Contact Number"}),Object(a.jsx)("th",{children:"Location"}),Object(a.jsx)("th",{children:"Actions"})]})}),Object(a.jsx)("tbody",{children:this.eteamList(r)})]}),Object(a.jsx)(A,{itemsCount:t,pageSize:i,onPageChange:this.handlePageChange,currentPage:s})]})}}]),n}(i.Component),V=n(34),U=(n(46),function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onChangeAccidentDate=a.onChangeAccidentDate.bind(Object(u.a)(a)),a.onChangeAccidentTime=a.onChangeAccidentTime.bind(Object(u.a)(a)),a.onChangeDriverAge=a.onChangeDriverAge.bind(Object(u.a)(a)),a.onChangeDriverGender=a.onChangeDriverGender.bind(Object(u.a)(a)),a.onChangeWeather=a.onChangeWeather.bind(Object(u.a)(a)),a.onChangeRoadSurface=a.onChangeRoadSurface.bind(Object(u.a)(a)),a.onChangeVehicleType=a.onChangeVehicleType.bind(Object(u.a)(a)),a.onChangeVehicleYOM=a.onChangeVehicleYOM.bind(Object(u.a)(a)),a.onChangeVehicleCondition=a.onChangeVehicleCondition.bind(Object(u.a)(a)),a.onChangeLicenseIssueDate=a.onChangeLicenseIssueDate.bind(Object(u.a)(a)),a.onChangeDrivingSide=a.onChangeDrivingSide.bind(Object(u.a)(a)),a.onChangeSeverity=a.onChangeSeverity.bind(Object(u.a)(a)),a.onChangeReason=a.onChangeReason.bind(Object(u.a)(a)),a.onChangeKmPost=a.onChangeKmPost.bind(Object(u.a)(a)),a.onChangeSuburb=a.onChangeSuburb.bind(Object(u.a)(a)),a.onChangeOperatedSpeed=a.onChangeOperatedSpeed.bind(Object(u.a)(a)),a.refresh=a.refresh.bind(Object(u.a)(a)),a.onSubmit=a.onSubmit.bind(Object(u.a)(a)),a.state={accidentDate:a.props.accident.accidentDate,accidentTime:a.props.accident.accidentTime,driverAge:a.props.accident.driverAge,driverGender:a.props.accident.driverGender,weather:a.props.accident.weather,roadSurface:a.props.accident.roadSurface,vehicleType:a.props.accident.vehicleType,vehicleYOM:a.props.accident.vehicleYOM,licenseIssueDate:a.props.accident.licenseIssueDate,drivingSide:a.props.accident.drivingSide,severity:a.props.accident.severity,reason:a.props.accident.reason,kmPost:a.props.accident.kmPost,suburb:a.props.accident.suburb,operatedSpeed:a.props.accident.operatedSpeed,vehicle_condition:a.props.accident.vehicle_condition,token:a.props.token,res:""},a}return Object(h.a)(n,[{key:"onChangeAccidentDate",value:function(e){this.setState({accidentDate:e})}},{key:"onChangeLicenseIssueDate",value:function(e){this.setState({licenseIssueDate:e})}},{key:"onChangeAccidentTime",value:function(e){this.setState({accidentTime:e.target.value,res:""})}},{key:"onChangeDriverAge",value:function(e){this.setState({driverAge:e.target.value,res:""})}},{key:"onChangeDriverGender",value:function(e){this.setState({driverGender:"male"!==e.target.value,res:""})}},{key:"onChangeWeather",value:function(e){this.setState({weather:"clear"!==e.target.value,res:""})}},{key:"onChangeRoadSurface",value:function(e){this.setState({roadSurface:"dry"!==e.target.value,res:""})}},{key:"onChangeVehicleCondition",value:function(e){this.setState({vehicle_condition:"good"!==e.target.value,res:""})}},{key:"onChangeVehicleType",value:function(e){this.setState({vehicleType:parseInt(e.target.value),res:""})}},{key:"onChangeVehicleYOM",value:function(e){this.setState({vehicleYOM:e.target.value,res:""})}},{key:"onChangeDrivingSide",value:function(e){this.setState({drivingSide:"colombo"!==e.target.value,res:""})}},{key:"onChangeSeverity",value:function(e){this.setState({severity:parseInt(e.target.value),res:""})}},{key:"onChangeReason",value:function(e){this.setState({reason:parseInt(e.target.value),res:""})}},{key:"onChangeKmPost",value:function(e){this.setState({kmPost:e.target.value,res:""})}},{key:"onChangeSuburb",value:function(e){switch(this.setState({suburb:parseInt(e.target.value),res:""}),parseInt(e.target.value)){case 0:this.setState({kmPost:0});break;case 1:this.setState({kmPost:5.9});break;case 2:this.setState({kmPost:13.7});break;case 3:this.setState({kmPost:34.8});break;case 4:this.setState({kmPost:46});break;case 5:this.setState({kmPost:67.6});break;case 6:this.setState({kmPost:79.8});break;case 7:this.setState({kmPost:95.3});break;case 8:this.setState({kmPost:108});break;case 9:this.setState({kmPost:116.5});break;case 10:this.setState({kmPost:127})}}},{key:"onChangeOperatedSpeed",value:function(e){this.setState({operatedSpeed:e.target.value,res:""})}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var n=new Date;if(this.state.accidentDate instanceof Date){var a={datetime:new Date(this.state.accidentDate.toString().replace(/(\d\d:\d\d:\d\d)/,this.state.accidentTime)),driverAge:this.state.driverAge,driverGender:this.state.driverGender,weather:this.state.weather,roadSurface:this.state.roadSurface,vehicleType:this.state.vehicleType,vehicleYOM:this.state.vehicleYOM,vehicle_condition:this.state.vehicle_condition,licenseIssueDate:this.state.licenseIssueDate,drivingSide:this.state.drivingSide,severity:this.state.severity,reason:this.state.reason,kmPost:this.state.kmPost,suburb:this.state.suburb,operatedSpeed:this.state.operatedSpeed,sessionToken:this.state.token};console.log(a);var i=new Date;g.post("accident/submit",a).then((function(e){console.log("submit res:"),console.log(e),document.getElementById("accident-report-from").reset(),t.setState({res:e.data.message,accidentDate:i,accidentTime:i.toString().match(/(\d\d:\d\d)/)[0],driverAge:17,driverGender:!1,weather:!1,roadSurface:!1,vehicleType:0,vehicleYOM:i.getFullYear(),licenseIssueDate:i,drivingSide:!1,severity:0,reason:0,kmPost:0,suburb:0,operatedSpeed:0,vehicle_condition:!1})}))}else this.setState({res:"Validation Error: Date is invalid",accidentDate:n,name:""})}},{key:"refresh",value:function(){this.setState({accidentDate:this.props.accident.accidentDate,accidentTime:this.props.accident.accidentTime,driverAge:this.props.accident.driverAge,driverGender:this.props.accident.driverGender,weather:this.props.accident.weather,roadSurface:this.props.accident.roadSurface,vehicleType:this.props.accident.vehicleType,vehicleYOM:this.props.accident.vehicleYOM,licenseIssueDate:this.props.accident.licenseIssueDate,drivingSide:this.props.accident.drivingSide,severity:this.props.accident.severity,reason:this.props.accident.reason,kmPost:this.props.accident.kmPost,suburb:this.props.accident.suburb,operatedSpeed:this.props.accident.operatedSpeed,vehicle_condition:this.props.accident.vehicle_condition})}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:"acc",children:[Object(a.jsx)("div",{className:"header",children:Object(a.jsx)("h3",{children:"Accident Report "})}),this.props.isModal&&Object(a.jsx)("button",{className:"badge badge-primary",onClick:this.refresh,children:"Update form"}),Object(a.jsxs)("form",{id:"accident-report-from",onSubmit:this.onSubmit,children:[Object(a.jsx)("br",{}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("label",{children:"Accident Date: "})}),Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("div",{children:Object(a.jsx)(V.a,{className:"form-control",selected:this.state.accidentDate,onChange:this.onChangeAccidentDate})})})]}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("label",{children:"Accident Time: "})}),Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("input",{type:"time",className:"form-control",value:this.state.accidentTime,onChange:this.onChangeAccidentTime})})]}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("label",{children:"Driver Age "})}),Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("input",{type:"number",className:"form-control",value:this.state.driverAge,onChange:this.onChangeDriverAge,min:"17",max:"76"})})]}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("label",{children:"Driver Gender "})}),Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsxs)("select",{className:"form-control",onChange:this.onChangeDriverGender,children:[Object(a.jsx)("option",{value:"male",children:"Male"}),Object(a.jsx)("option",{value:"female",children:"Female"})]})})]}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("label",{children:"Weather "})}),Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsxs)("select",{className:"form-control",onChange:this.onChangeWeather,children:[Object(a.jsx)("option",{value:"clear",children:"Clear"}),Object(a.jsx)("option",{value:"rainy",children:"Rainy"})]})})]}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("label",{children:"Road Surface "})}),Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsxs)("select",{className:"form-control",onChange:this.onChangeRoadSurface,children:[Object(a.jsx)("option",{value:"dry",children:"Dry"}),Object(a.jsx)("option",{value:"wet",children:"Wet"})]})})]}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("label",{children:"Vehicle Type "})}),Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsxs)("select",{className:"form-control",onChange:this.onChangeVehicleType,children:[Object(a.jsx)("option",{value:"0",children:"Car"}),Object(a.jsx)("option",{value:"1",children:"HV"}),Object(a.jsx)("option",{value:"2",children:"Dual Purpose"})]})})]}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("label",{children:"Vehicle manufacture year "})}),Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("input",{type:"number",className:"form-control",value:this.state.vehicleYOM,onChange:this.onChangeVehicleYOM})})]}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("label",{children:"Vehicle Condition "})}),Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsxs)("select",{className:"form-control",onChange:this.onChangeVehicleCondition,children:[Object(a.jsx)("option",{value:"good",children:"Good"}),Object(a.jsx)("option",{value:"bad",children:"Bad"})]})})]}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("label",{children:"License Issue Date "})}),Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)(V.a,{className:"form-control",selected:this.state.licenseIssueDate,onChange:this.onChangeLicenseIssueDate})})]}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("label",{children:"Driving Side "})}),Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsxs)("select",{className:"form-control",onChange:this.onChangeDrivingSide,value:this.state.drivingSide?"matara":"colombo",children:[Object(a.jsx)("option",{value:"colombo",children:"Colombo to Matara"}),Object(a.jsx)("option",{value:"matara",children:"Matara to Colombo"})]})})]}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("label",{children:"Severity "})}),Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsxs)("select",{className:"form-control",onChange:this.onChangeSeverity,children:[Object(a.jsx)("option",{value:"0",children:"Property Damage"}),Object(a.jsx)("option",{value:"1",children:"Injury"}),Object(a.jsx)("option",{value:"2",children:"Fatality"})]})})]}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("label",{children:"Reason "})}),Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsxs)("select",{className:"form-control",onChange:this.onChangeReason,children:[Object(a.jsx)("option",{value:"0",children:"Animal Crossing"}),Object(a.jsx)("option",{value:"1",children:"Vehicle Issue"}),Object(a.jsx)("option",{value:"2",children:"Speed"}),Object(a.jsx)("option",{value:"3",children:"Tailgating"}),Object(a.jsx)("option",{value:"4",children:"Sleep"}),Object(a.jsx)("option",{value:"5",children:"Slipping"})]})})]}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("label",{children:"Suburb "})}),Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsxs)("select",{className:"form-control",onChange:this.onChangeSuburb,value:this.state.suburb.toString(),children:[Object(a.jsx)("option",{value:"0",children:"Kottawa"}),Object(a.jsx)("option",{value:"1",children:"Kahathuduwa"}),Object(a.jsx)("option",{value:"2",children:"Gelanigama"}),Object(a.jsx)("option",{value:"3",children:"Dodangoda"}),Object(a.jsx)("option",{value:"4",children:"Welipanna"}),Object(a.jsx)("option",{value:"5",children:"Kurundugahahetekma"}),Object(a.jsx)("option",{value:"6",children:"Baddegama"}),Object(a.jsx)("option",{value:"7",children:"Pinnaduwa"}),Object(a.jsx)("option",{value:"8",children:"Imaduwa"}),Object(a.jsx)("option",{value:"9",children:"Kokmaduwa"}),Object(a.jsx)("option",{value:"10",children:"Godagama"})]})})]}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("label",{children:"KM Post "})}),Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("input",{type:"number",step:"0.1",className:"form-control",value:this.state.kmPost,onChange:this.onChangeKmPost,min:"0",max:"127"})})]}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("label",{children:"Operated Speed (km/h) "})}),Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("input",{type:"number",className:"form-control",value:this.state.operatedSpeed,onChange:this.onChangeOperatedSpeed,min:"0"})})]}),Object(a.jsxs)("div",{className:"form",children:[Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"submit",value:"Submit Report",onSubmit:this.onSubmit,className:"btn btn-primary"})," ",this.state.res,Object(a.jsx)("div",{})]})]})]})]})}}]),n}(i.Component));function Y(e){return new Date(e.toString()).toString().match(/\d\d:\d\d/)[0]}function z(e){return new Date(e.toString()).toString().match(/\w+ \w+ \d+ \d+/)}function H(e){switch(e){case 0:return"Kottawa";case 1:return"Kahathuduwa";case 2:return"Gelanigama";case 3:return"Dodangoda";case 4:return"Welipanna";case 5:return"Kurundugahahetekma";case 6:return"Baddegama";case 7:return"Pinnaduwa";case 8:return"Imaduwa";case 9:return"Kokmaduwa";case 10:return"Godagama";default:return"Undefined"}}function W(e){switch(e){case"Kottawa":return 0;case"Kahathuduwa":return 1;case"Gelanigama":return 2;case"Dodangoda":return 3;case"Welipanna":return 4;case"Kurundugahahetekma":return 5;case"Baddegama":return 6;case"Pinnaduwa":return 7;case"Imaduwa":return 8;case"Kokmaduwa":return 9;case"Godagama":return 10;default:return 0}}function q(e){switch(e){case 0:return"KM1";case 1:return"KM2";case 2:return"KM3";case 3:return"KM4";case 4:return"KM5";case 5:return"KM6";default:return"Undefined"}}function B(e){switch(e){case 0:return 0;case 1:return 5.9;case 2:return 13.7;case 3:return 34.8;case 4:return 46;case 5:return 67.6;case 6:return 79.8;case 7:return 95.3;case 8:return 108;case 9:return 116.5;case 10:return 127;default:return null}}var $=function(e){return e.accident.id===e.edit_id?Object(a.jsxs)("tr",{className:"table-secondary",children:[Object(a.jsxs)("td",{children:[z(e.edit_accidentDate),Object(a.jsx)("input",{type:"date",value:e.edit_accidentDate,onChange:e.onChangeAccidentDate})]}),Object(a.jsxs)("td",{children:[e.edit_accidentTime,Object(a.jsx)("input",{type:"time",className:"form-control",value:e.edit_accidentTime,onChange:e.onChangeAccidentTime})]}),Object(a.jsx)("td",{children:Object(a.jsx)("input",{type:"number",className:"form-control",value:e.edit_driverAge,onChange:e.onChangeDriverAge,min:"17",max:"76",style:{width:60}})}),Object(a.jsx)("td",{children:Object(a.jsxs)("select",{className:"form-control",onChange:e.onChangeDriverGender,children:[Object(a.jsx)("option",{value:"male",children:"Male"}),Object(a.jsx)("option",{selected:e.edit_driverGender,value:"female",children:"Female"})]})}),Object(a.jsx)("td",{children:Object(a.jsxs)("select",{className:"form-control",onChange:e.onChangeWeather,children:[Object(a.jsx)("option",{value:"clear",children:"Clear"}),Object(a.jsx)("option",{selected:e.edit_weather,value:"rainy",children:"Rainy"})]})}),Object(a.jsx)("td",{children:Object(a.jsxs)("select",{className:"form-control",onChange:e.onChangeRoadSurface,children:[Object(a.jsx)("option",{value:"dry",children:"Dry"}),Object(a.jsx)("option",{selected:e.edit_roadSurface,value:"wet",children:"Wet"})]})}),Object(a.jsx)("td",{children:Object(a.jsxs)("select",{className:"form-control",onChange:e.onChangeVehicleType,children:[Object(a.jsx)("option",{selected:0===e.edit_vehicleType,value:"0",children:"Car"}),Object(a.jsx)("option",{selected:1===e.edit_vehicleType,value:"1",children:"HV"}),Object(a.jsx)("option",{selected:2===e.edit_vehicleType,value:"2",children:"DP"})]})}),Object(a.jsx)("td",{children:Object(a.jsx)("input",{type:"number",className:"form-control",value:e.edit_vehicleYOM,onChange:e.onChangeVehicleYOM,style:{width:80}})}),Object(a.jsxs)("td",{children:[z(e.edit_licenseIssueDate),Object(a.jsx)("input",{type:"date",value:e.edit_licenseIssueDate,onChange:e.onChangeLicenseIssueDate})]}),Object(a.jsx)("td",{children:Object(a.jsxs)("select",{className:"form-control",onChange:e.onChangeDrivingSide,children:[Object(a.jsx)("option",{value:"colombo",children:"Colombo"}),Object(a.jsx)("option",{selected:e.edit_drivingSide,value:"matara",children:"Matara"})]})}),Object(a.jsx)("td",{children:Object(a.jsxs)("select",{className:"form-control",style:{width:100},onChange:e.onChangeSeverity,children:[Object(a.jsx)("option",{selected:0===e.edit_severity,value:"0",children:"Property"}),Object(a.jsx)("option",{selected:1===e.edit_severity,value:"1",children:"Injury"}),Object(a.jsx)("option",{selected:2===e.edit_severity,value:"2",children:"Fatality"})]})}),Object(a.jsx)("td",{children:Object(a.jsxs)("select",{className:"form-control",style:{width:100},onChange:e.onChangeReason,children:[Object(a.jsx)("option",{selected:0===e.edit_reason,value:"0",children:"AnimalCrossing"}),Object(a.jsx)("option",{selected:1===e.edit_reason,value:"1",children:"VehicleIssue"}),Object(a.jsx)("option",{selected:2===e.edit_reason,value:"2",children:"Speed"}),Object(a.jsx)("option",{selected:3===e.edit_reason,value:"3",children:"Tailgaiting"}),Object(a.jsx)("option",{selected:4===e.edit_reason,value:"4",children:"Sleep"}),Object(a.jsx)("option",{selected:5===e.edit_reason,value:"5",children:"Slipping"})]})}),Object(a.jsx)("td",{children:Object(a.jsxs)("select",{className:"form-control",style:{width:100},onChange:e.onChangeSuburb,children:[Object(a.jsx)("option",{selected:0===e.edit_suburb,value:"0",children:H(0)}),Object(a.jsx)("option",{selected:1===e.edit_suburb,value:"1",children:H(1)}),Object(a.jsx)("option",{selected:2===e.edit_suburb,value:"2",children:H(2)}),Object(a.jsx)("option",{selected:3===e.edit_suburb,value:"3",children:H(3)}),Object(a.jsx)("option",{selected:4===e.edit_suburb,value:"4",children:H(4)}),Object(a.jsx)("option",{selected:5===e.edit_suburb,value:"5",children:H(5)}),Object(a.jsx)("option",{selected:6===e.edit_suburb,value:"6",children:H(6)}),Object(a.jsx)("option",{selected:7===e.edit_suburb,value:"7",children:H(7)}),Object(a.jsx)("option",{selected:8===e.edit_suburb,value:"8",children:H(8)}),Object(a.jsx)("option",{selected:9===e.edit_suburb,value:"9",children:H(9)}),Object(a.jsx)("option",{selected:10===e.edit_suburb,value:"10",children:H(10)})]})}),Object(a.jsx)("td",{children:Object(a.jsx)("input",{type:"number",className:"form-control",value:e.edit_kmPost,onChange:e.onChangeKmPost,style:{width:80},min:"0",max:"127",step:".1"})}),Object(a.jsx)("td",{children:Object(a.jsx)("input",{type:"number",className:"form-control",value:e.edit_operatedSpeed,onChange:e.onChangeOperatedSpeed,style:{width:80},min:"0"})}),Object(a.jsx)("td",{children:Object(a.jsxs)("select",{className:"form-control",onChange:e.onChangeVehicleCondition,children:[Object(a.jsx)("option",{value:"good",children:"Good"}),Object(a.jsx)("option",{selected:e.edit_vehicle_condition,value:"bad",children:"Bad"})]})}),Object(a.jsx)("td",{className:"text-muted",children:0===e.accident.day_cat?"Weekday":1===e.accident.day_cat?"Weekend":"PubHoliday"}),Object(a.jsx)("td",{className:"text-muted",children:0===e.accident.hour_cat?"Free":1===e.accident.hour_cat?"Rush":"Normal"}),Object(a.jsx)("td",{className:"text-muted",children:e.accident.month_cat?"Off-peak":"Peak"}),Object(a.jsx)("td",{className:"text-muted",children:0===e.accident.vision?"Poor":1===e.accident.vision?"Glare":2===e.accident.vision?"Normal":"Blurred"}),Object(a.jsx)("td",{className:"text-muted",children:0===e.accident.age_cat?"Young":1===e.accident.age_cat?"Mid":"Older"}),Object(a.jsx)("td",{className:"text-muted",children:q(e.accident.km_cat)}),Object(a.jsx)("td",{className:"text-muted",children:e.accident.drowsiness?"1":"0"}),Object(a.jsx)("td",{className:"text-muted",children:e.accident.enough_gap?"1":"0"}),Object(a.jsx)("td",{className:"text-muted",children:e.accident.animal_crossing_problem?"1":"0"}),Object(a.jsxs)("td",{children:[Object(a.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:function(){e.discardEdit()},children:Object(a.jsx)(y.a,{icon:k.b})}),"\xa0",Object(a.jsx)("button",{className:"btn btn-sm btn-success",onClick:function(){e.updateAccident(e.accident.id,e.edit_accidentDate,e.edit_accidentTime,e.edit_driverAge,e.edit_driverGender,e.edit_weather,e.edit_roadSurface,e.edit_vehicleType,e.edit_vehicleYOM,e.edit_licenseIssueDate,e.edit_drivingSide,e.edit_severity,e.edit_reason,e.edit_kmPost,e.edit_suburb,e.edit_operatedSpeed,e.edit_vehicle_condition)},children:Object(a.jsx)(y.a,{icon:k.l})})]})]}):Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:z(e.accident.datetime)}),Object(a.jsx)("td",{children:Y(e.accident.datetime)}),Object(a.jsx)("td",{children:e.accident.driverAge}),Object(a.jsx)("td",{children:e.accident.driverGender?"Female":"Male"}),Object(a.jsx)("td",{children:e.accident.weather?"Rain":"Clear"}),Object(a.jsx)("td",{children:e.accident.roadSurface?"Wet":"Dry"}),Object(a.jsx)("td",{children:0===e.accident.vehicleType?"Car":1===e.accident.vehicleType?"HV":"DP"}),Object(a.jsx)("td",{children:e.accident.vehicleYOM}),Object(a.jsx)("td",{children:z(e.accident.licenseIssueDate)}),Object(a.jsx)("td",{children:e.accident.drivingSide?"Matara":"Colombo"}),Object(a.jsx)("td",{children:0===e.accident.severity?"Property":1===e.accident.severity?"Injury":"Fatality"}),Object(a.jsx)("td",{children:0===e.accident.reason?"AnimalCrossing":1===e.accident.reason?"VehicleIssue":2===e.accident.reason?"Speed":3===e.accident.reason?"Tailgaiting":4===e.accident.reason?"Sleep":"Slipping"}),Object(a.jsx)("td",{children:H(e.accident.suburb)}),Object(a.jsx)("td",{children:e.accident.kmPost}),Object(a.jsx)("td",{children:e.accident.operatedSpeed}),Object(a.jsx)("td",{children:e.accident.vehicle_condition?"Bad":"Good"}),Object(a.jsx)("td",{className:"text-muted",children:0===e.accident.day_cat?"Weekday":1===e.accident.day_cat?"Weekend":"PubHoliday"}),Object(a.jsx)("td",{className:"text-muted",children:0===e.accident.hour_cat?"Free":1===e.accident.hour_cat?"Rush":"Normal"}),Object(a.jsx)("td",{className:"text-muted",children:e.accident.month_cat?"Off-peak":"Peak"}),Object(a.jsx)("td",{className:"text-muted",children:0===e.accident.vision?"Poor":1===e.accident.vision?"Glare":2===e.accident.vision?"Normal":"Blurred"}),Object(a.jsx)("td",{className:"text-muted",children:0===e.accident.age_cat?"Young":1===e.accident.age_cat?"Mid":"Older"}),Object(a.jsx)("td",{className:"text-muted",children:q(e.accident.km_cat)}),Object(a.jsx)("td",{className:"text-muted",children:e.accident.drowsiness?"1":"0"}),Object(a.jsx)("td",{className:"text-muted",children:e.accident.enough_gap?"1":"0"}),Object(a.jsx)("td",{className:"text-muted",children:e.accident.animal_crossing_problem?"1":"0"}),Object(a.jsxs)("td",{children:[Object(a.jsx)("button",{className:"btn btn-sm btn-info",onClick:function(){e.editAccident(e.accident)},children:Object(a.jsx)(y.a,{icon:k.f})}),Object(a.jsx)("button",{className:"btn btn-sm btn-danger",onClick:function(){e.deleteAccident(e.accident.id)},children:Object(a.jsx)(y.a,{icon:k.o})})]})]})},J=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).getList=Object(D.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("accident/list");case 2:t=e.sent,a.setState({accidentlist:t.data.data,updateFlag:!1}),console.log("state_set:"),console.log(t.data.data);case 6:case"end":return e.stop()}}),e)}))),a.deleteAccident=a.deleteAccident.bind(Object(u.a)(a)),a.editAccident=a.editAccident.bind(Object(u.a)(a)),a.updateAccident=a.updateAccident.bind(Object(u.a)(a)),a.discardEdit=a.discardEdit.bind(Object(u.a)(a)),a.refresh=a.refresh.bind(Object(u.a)(a)),a.onChangeAccidentDate=a.onChangeAccidentDate.bind(Object(u.a)(a)),a.onChangeAccidentTime=a.onChangeAccidentTime.bind(Object(u.a)(a)),a.onChangeDriverAge=a.onChangeDriverAge.bind(Object(u.a)(a)),a.onChangeDriverGender=a.onChangeDriverGender.bind(Object(u.a)(a)),a.onChangeWeather=a.onChangeWeather.bind(Object(u.a)(a)),a.onChangeRoadSurface=a.onChangeRoadSurface.bind(Object(u.a)(a)),a.onChangeVehicleType=a.onChangeVehicleType.bind(Object(u.a)(a)),a.onChangeVehicleYOM=a.onChangeVehicleYOM.bind(Object(u.a)(a)),a.onChangeVehicleCondition=a.onChangeVehicleCondition.bind(Object(u.a)(a)),a.onChangeLicenseIssueDate=a.onChangeLicenseIssueDate.bind(Object(u.a)(a)),a.onChangeDrivingSide=a.onChangeDrivingSide.bind(Object(u.a)(a)),a.onChangeSeverity=a.onChangeSeverity.bind(Object(u.a)(a)),a.onChangeReason=a.onChangeReason.bind(Object(u.a)(a)),a.onChangeKmPost=a.onChangeKmPost.bind(Object(u.a)(a)),a.onChangeSuburb=a.onChangeSuburb.bind(Object(u.a)(a)),a.onChangeOperatedSpeed=a.onChangeOperatedSpeed.bind(Object(u.a)(a)),a.handlePageChange=a.handlePageChange.bind(Object(u.a)(a)),a.state={accidentlist:[],loading:!0,pageSize:a.props.pageSize,currentPage:1,updateFlag:!0},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(D.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getList();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handlePageChange",value:function(e){this.setState({currentPage:e})}},{key:"componentDidUpdate",value:function(){var e=Object(D.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==this.state.updateFlag){e.next=3;break}return e.next=3,this.getList();case 3:console.log(this.state);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteAccident",value:function(){var e=Object(D.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.delete("accident/delete/",{data:{id:t,sessionToken:this.props.token}}).then((function(e){console.log(e.data)}));case 2:this.setState({updateFlag:!0}),this.refresh();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateAccident",value:function(){var e=Object(D.a)(P.a.mark((function e(t,n,a,i,s,c,r,d,o,l,h,u,j,b,m,v,p){var O,x;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Update date format"),O=new Date(n),x=new Date(O.toISOString().replace(/(\d\d:\d\d)/,a).slice(0,-1)),console.log(O.toISOString()),console.log(a),console.log("update datetime:"),console.log(x),e.next=9,g.post("accident/update/",{id:t,datetime:x,driverAge:i,driverGender:s,weather:c,roadSurface:r,vehicleType:d,vehicleYOM:o,licenseIssueDate:l,drivingSide:h,severity:u,reason:j,kmPost:b,suburb:m,operatedSpeed:v,vehicle_condition:p,sessionToken:this.props.token}).then((function(e){console.log(e.data)}));case 9:this.setState({updateFlag:!0,edit_id:null,edit_accidentDate:null,edit_accidentTime:null,edit_driverAge:null,edit_driverGender:null,edit_weather:null,edit_roadSurface:null,edit_vehicleType:null,edit_vehicleYOM:null,edit_licenseIssueDate:null,edit_drivingSide:null,edit_severity:null,edit_reason:null,edit_kmPost:null,edit_suburb:null,edit_operatedSpeed:null,edit_vehicle_condition:null}),this.refresh();case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,a,i,s,c,r,d,o,l,h,u,j,b,m,g,v){return e.apply(this,arguments)}}()},{key:"editAccident",value:function(){var e=Object(D.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({updateFlag:!0,edit_id:t.id,edit_accidentDate:t.datetime,edit_accidentTime:Y(t.datetime),edit_driverAge:t.driverAge,edit_driverGender:t.driverGender,edit_weather:t.weather,edit_roadSurface:t.roadSurface,edit_vehicleType:t.vehicleType,edit_vehicleYOM:t.vehicleYOM,edit_licenseIssueDate:t.licenseIssueDate,edit_drivingSide:t.drivingSide,edit_severity:t.severity,edit_reason:t.reason,edit_kmPost:t.kmPost,edit_suburb:t.suburb,edit_operatedSpeed:t.operatedSpeed,edit_vehicle_condition:t.vehicle_condition});case 2:console.log("edited state:"),console.log(this.state);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"discardEdit",value:function(){this.setState({edit_id:null,edit_accidentDate:null,edit_accidentTime:null,edit_driverAge:null,edit_driverGender:null,edit_weather:null,edit_roadSurface:null,edit_vehicleType:null,edit_vehicleYOM:null,edit_licenseIssueDate:null,edit_drivingSide:null,edit_severity:null,edit_reason:null,edit_kmPost:null,edit_suburb:null,edit_operatedSpeed:null,edit_vehicle_condition:null,updateFlag:!0})}},{key:"refresh",value:function(){this.setState({updateFlag:!0})}},{key:"onChangeAccidentDate",value:function(e){this.setState({edit_accidentDate:e.target.value})}},{key:"onChangeAccidentTime",value:function(e){this.setState({edit_accidentTime:e.target.value})}},{key:"onChangeLicenseIssueDate",value:function(e){this.setState({edit_licenseIssueDate:e.target.value})}},{key:"onChangeDriverAge",value:function(e){this.setState({edit_driverAge:e.target.value})}},{key:"onChangeDriverGender",value:function(e){this.setState({edit_driverGender:"male"!==e.target.value})}},{key:"onChangeWeather",value:function(e){this.setState({edit_weather:"clear"!==e.target.value})}},{key:"onChangeRoadSurface",value:function(e){this.setState({edit_roadSurface:"dry"!==e.target.value})}},{key:"onChangeVehicleCondition",value:function(e){this.setState({edit_vehicle_condition:"good"!==e.target.value})}},{key:"onChangeVehicleType",value:function(e){this.setState({edit_vehicleType:parseInt(e.target.value)})}},{key:"onChangeVehicleYOM",value:function(e){this.setState({edit_vehicleYOM:e.target.value})}},{key:"onChangeDrivingSide",value:function(e){this.setState({edit_drivingSide:"colombo"!==e.target.value})}},{key:"onChangeSeverity",value:function(e){this.setState({edit_severity:parseInt(e.target.value)})}},{key:"onChangeReason",value:function(e){this.setState({edit_reason:parseInt(e.target.value)})}},{key:"onChangeKmPost",value:function(e){this.setState({edit_kmPost:e.target.value})}},{key:"onChangeSuburb",value:function(e){switch(this.setState({edit_suburb:parseInt(e.target.value)}),parseInt(e.target.value)){case 0:this.setState({edit_kmPost:0});break;case 1:this.setState({edit_kmPost:5.9});break;case 2:this.setState({edit_kmPost:13.7});break;case 3:this.setState({edit_kmPost:34.8});break;case 4:this.setState({edit_kmPost:46});break;case 5:this.setState({edit_kmPost:67.6});break;case 6:this.setState({edit_kmPost:79.8});break;case 7:this.setState({edit_kmPost:95.3});break;case 8:this.setState({edit_kmPost:108});break;case 9:this.setState({edit_kmPost:116.5});break;case 10:this.setState({edit_kmPost:127})}}},{key:"onChangeOperatedSpeed",value:function(e){this.setState({edit_operatedSpeed:e.target.value,res:""})}},{key:"accidentList",value:function(e){var t=this;return e.map((function(e){return Object(a.jsx)($,{accident:e,deleteAccident:t.deleteAccident,editAccident:t.editAccident,updateAccident:t.updateAccident,discardEdit:t.discardEdit,onChangeAccidentDate:t.onChangeAccidentDate,onChangeAccidentTime:t.onChangeAccidentTime,onChangeDriverAge:t.onChangeDriverAge,onChangeDriverGender:t.onChangeDriverGender,onChangeWeather:t.onChangeWeather,onChangeRoadSurface:t.onChangeRoadSurface,onChangeVehicleType:t.onChangeVehicleType,onChangeVehicleYOM:t.onChangeVehicleYOM,onChangeVehicleCondition:t.onChangeVehicleCondition,onChangeLicenseIssueDate:t.onChangeLicenseIssueDate,onChangeDrivingSide:t.onChangeDrivingSide,onChangeSeverity:t.onChangeSeverity,onChangeReason:t.onChangeReason,onChangeKmPost:t.onChangeKmPost,onChangeSuburb:t.onChangeSuburb,onChangeOperatedSpeed:t.onChangeOperatedSpeed,edit_id:t.state.edit_id,edit_accidentDate:t.state.edit_accidentDate,edit_accidentTime:t.state.edit_accidentTime,edit_driverAge:t.state.edit_driverAge,edit_driverGender:t.state.edit_driverGender,edit_weather:t.state.edit_weather,edit_roadSurface:t.state.edit_roadSurface,edit_vehicleType:t.state.edit_vehicleType,edit_vehicleYOM:t.state.edit_vehicleYOM,edit_licenseIssueDate:t.state.edit_licenseIssueDate,edit_drivingSide:t.state.edit_drivingSide,edit_severity:t.state.edit_severity,edit_reason:t.state.edit_reason,edit_kmPost:t.state.edit_kmPost,edit_suburb:t.state.edit_suburb,edit_operatedSpeed:t.state.edit_operatedSpeed,edit_vehicle_condition:t.state.edit_vehicle_condition},e.id)}))}},{key:"render",value:function(){var e=this,t=this.state.accidentlist.length,n=this.state,i=n.pageSize,s=n.currentPage,c=n.accidentlist;if(this.state.updateFlag)return Object(a.jsx)(I,{});if(0===t)return Object(a.jsx)("p",{children:"There are no Accidents in the database"});var r=M(c,s,i);return Object(a.jsxs)("div",{children:[Object(a.jsxs)("h3",{children:[" ",Object(a.jsx)(y.a,{icon:k.d})," Accident List\xa0",Object(a.jsx)("button",{className:"btn btn-sm btn-light",onClick:function(){e.refresh()},children:Object(a.jsx)(y.a,{icon:k.n})})]}),Object(a.jsxs)("table",{className:"table table-bordered table-hover",children:[Object(a.jsx)("thead",{className:"thead-light",children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Accident Date"}),Object(a.jsx)("th",{children:"Accident Time"}),Object(a.jsx)("th",{children:"Driver Age"}),Object(a.jsx)("th",{children:"Gender"}),Object(a.jsx)("th",{children:"Weather"}),Object(a.jsx)("th",{children:"Road Surface"}),Object(a.jsx)("th",{children:"Vehicle Type"}),Object(a.jsx)("th",{children:"Vehicle YOM"}),Object(a.jsx)("th",{children:"License Issue Date"}),Object(a.jsx)("th",{children:"Driving Side"}),Object(a.jsx)("th",{children:"Severity"}),Object(a.jsx)("th",{children:"Reason"}),Object(a.jsx)("th",{children:"Suburb"}),Object(a.jsx)("th",{children:"KM Post"}),Object(a.jsx)("th",{children:"Operated Speed"}),Object(a.jsx)("th",{children:"Vehicle Condition"}),Object(a.jsx)("th",{children:"Day_cat"}),Object(a.jsx)("th",{children:"Hour_cat"}),Object(a.jsx)("th",{children:"Month_cat"}),Object(a.jsx)("th",{children:"Vision"}),Object(a.jsx)("th",{children:"Age_cat"}),Object(a.jsx)("th",{children:"KM_cat"}),Object(a.jsx)("th",{children:"Drowsiness"}),Object(a.jsx)("th",{children:"Enough_gap"}),Object(a.jsx)("th",{children:"Animal_crossing"}),Object(a.jsx)("th",{children:"Actions"})]})}),Object(a.jsx)("tbody",{children:this.accidentList(r)})]}),Object(a.jsx)(A,{itemsCount:t,pageSize:i,onPageChange:this.handlePageChange,currentPage:s})]})}}]),n}(i.Component),Z=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;Object(l.a)(this,n),(a=t.call(this,e)).onChangeEventDate=a.onChangeEventDate.bind(Object(u.a)(a)),a.onChangeEventTime=a.onChangeEventTime.bind(Object(u.a)(a)),a.onChangeType=a.onChangeType.bind(Object(u.a)(a)),a.onChangeDrivingSide=a.onChangeDrivingSide.bind(Object(u.a)(a)),a.onChangeSeverity=a.onChangeSeverity.bind(Object(u.a)(a)),a.onChangeKmPost=a.onChangeKmPost.bind(Object(u.a)(a)),a.onChangeSuburb=a.onChangeSuburb.bind(Object(u.a)(a)),a.refresh=a.refresh.bind(Object(u.a)(a)),a.onSubmit=a.onSubmit.bind(Object(u.a)(a));new Date;return a.state={eventDate:a.props.event.eventDate,eventTime:a.props.event.eventTime,type:a.props.event.type,drivingSide:a.props.event.drivingSide,severity:a.props.event.severity,kmPost:a.props.event.kmPost,suburb:a.props.event.suburb,token:a.props.token,res:""},a}return Object(h.a)(n,[{key:"onChangeEventDate",value:function(e){this.setState({eventDate:e})}},{key:"onChangeEventTime",value:function(e){this.setState({eventTime:e.target.value,res:""})}},{key:"onChangeType",value:function(e){this.setState({type:e.target.value,res:""})}},{key:"onChangeDrivingSide",value:function(e){this.setState({drivingSide:e.target.value,res:""})}},{key:"onChangeSeverity",value:function(e){this.setState({severity:e.target.value,res:""})}},{key:"onChangeKmPost",value:function(e){this.setState({kmPost:e.target.value,res:""})}},{key:"onChangeSuburb",value:function(e){switch(this.setState({suburb:e.target.value,res:""}),e.target.value){case"0":this.setState({kmPost:0});break;case"1":this.setState({kmPost:5.9});break;case"2":this.setState({kmPost:13.7});break;case"3":this.setState({kmPost:34.8});break;case"4":this.setState({kmPost:46});break;case"5":this.setState({kmPost:67.6});break;case"6":this.setState({kmPost:79.8});break;case"7":this.setState({kmPost:95.3});break;case"8":this.setState({kmPost:108});break;case"9":this.setState({kmPost:116.5});break;case"10":this.setState({kmPost:127})}}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var n=new Date;if(this.state.eventDate instanceof Date){var a={datetime:new Date(this.state.eventDate.toString().replace(/(\d\d:\d\d:\d\d)/,this.state.eventTime)),type:this.state.type,drivingSide:this.state.drivingSide,severity:this.state.severity,kmPost:this.state.kmPost,suburb:this.state.suburb,sessionToken:this.state.token};console.log(a);var i=new Date;g.post("event/submit",a).then((function(e){document.getElementById("event-report-from").reset(),t.setState({res:e.data.message,eventDate:i,eventTime:i.toString().match(/(\d\d:\d\d)/)[0],type:0,drivingSide:!1,severity:0,kmPost:0,suburb:0})}))}else this.setState({res:"Validation Error: Date is invalid",eventDate:n,name:""})}},{key:"refresh",value:function(){this.setState({eventDate:this.props.event.eventDate,eventTime:this.props.event.eventTime,type:this.props.event.type,drivingSide:this.props.event.drivingSide,severity:this.props.event.severity,kmPost:this.props.event.kmPost,suburb:this.props.event.suburb})}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:"acc",children:[Object(a.jsx)("div",{className:"header",children:Object(a.jsx)("h3",{children:"Event Report "})}),this.props.isModal&&Object(a.jsx)("button",{className:"badge badge-primary",onClick:this.refresh,children:"Update form"}),Object(a.jsxs)("form",{id:"event-report-from",onSubmit:this.onSubmit,children:[Object(a.jsx)("br",{}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("label",{children:"Event Date: "})}),Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("div",{children:Object(a.jsx)(V.a,{className:"form-control",selected:this.state.eventDate,onChange:this.onChangeEventDate})})})]}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("label",{children:"Event Time: "})}),Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("input",{type:"time",className:"form-control",value:this.state.eventTime,onChange:this.onChangeEventTime})})]}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("label",{children:"Type "})}),Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsxs)("select",{className:"form-control",onChange:this.onChangeType,children:[Object(a.jsx)("option",{value:"0",children:"Fallen Tree"}),Object(a.jsx)("option",{value:"1",children:"Landslide"}),Object(a.jsx)("option",{value:"2",children:"Flooding"}),Object(a.jsx)("option",{value:"3",children:"Other"})]})})]}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("label",{children:"Side "})}),Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsxs)("select",{className:"form-control",onChange:this.onChangeDrivingSide,value:this.state.drivingSide?"true":"false",children:[Object(a.jsx)("option",{value:"false",children:"Colombo to Matara"}),Object(a.jsx)("option",{value:"true",children:"Matara to Colombo"})]})})]}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("label",{children:"Severity "})}),Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsxs)("select",{className:"form-control",onChange:this.onChangeSeverity,children:[Object(a.jsx)("option",{value:"0",children:"Minor"}),Object(a.jsx)("option",{value:"1 ",children:"Intermediate"}),Object(a.jsx)("option",{value:"2",children:"Major"})]})})]}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("label",{children:"Suburb "})}),Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsxs)("select",{className:"form-control",onChange:this.onChangeSuburb,value:this.state.suburb.toString(),children:[Object(a.jsx)("option",{value:"0",children:"Kottawa"}),Object(a.jsx)("option",{value:"1",children:"Kahathuduwa"}),Object(a.jsx)("option",{value:"2",children:"Gelanigama"}),Object(a.jsx)("option",{value:"3",children:"Dodangoda"}),Object(a.jsx)("option",{value:"4",children:"Welipanna"}),Object(a.jsx)("option",{value:"5",children:"Kurundugahahetekma"}),Object(a.jsx)("option",{value:"6",children:"Baddegama"}),Object(a.jsx)("option",{value:"7",children:"Pinnaduwa"}),Object(a.jsx)("option",{value:"8",children:"Imaduwa"}),Object(a.jsx)("option",{value:"9",children:"Kokmaduwa"}),Object(a.jsx)("option",{value:"10",children:"Godagama"})]})})]}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("label",{children:"KM Post "})}),Object(a.jsx)("div",{className:"col-sm-3",children:Object(a.jsx)("input",{type:"number",step:"0.1",className:"form-control",value:this.state.kmPost,onChange:this.onChangeKmPost,min:"0",max:"127"})})]}),Object(a.jsxs)("div",{className:"form",children:[Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"submit",value:"Submit Report",onSubmit:this.onSubmit,className:"btn btn-primary"})," ",this.state.res,Object(a.jsx)("div",{})]})]})]})]})}}]),n}(i.Component),X=function(e){return e.event.id===e.edit_id?Object(a.jsxs)("tr",{className:"table-secondary",children:[Object(a.jsxs)("td",{children:[z(e.edit_eventDate),Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"date",value:e.edit_eventDate,onChange:e.onChangeEventDate})]}),Object(a.jsxs)("td",{children:[e.edit_eventTime,Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"time",className:"form-control-sm",value:e.edit_eventTime,onChange:e.onChangeEventTime,style:{width:130}})]}),Object(a.jsx)("td",{children:Object(a.jsxs)("select",{className:"form-control",onChange:e.onChangeEventType,children:[Object(a.jsx)("option",{selected:0===e.edit_type,value:"0",children:"Fallen Tree"}),Object(a.jsx)("option",{selected:1===e.edit_type,value:"1",children:"Landslide"}),Object(a.jsx)("option",{selected:2===e.edit_type,value:"2",children:"Flooding"}),Object(a.jsx)("option",{selected:3===e.edit_type,value:"3",children:"Other"})]})}),Object(a.jsx)("td",{children:Object(a.jsxs)("select",{className:"form-control",onChange:e.onChangeDrivingSide,children:[Object(a.jsx)("option",{value:"colombo",children:"Colombo"}),Object(a.jsx)("option",{selected:e.edit_drivingSide,value:"matara",children:"Matara"})]})}),Object(a.jsx)("td",{children:Object(a.jsxs)("select",{className:"form-control",style:{width:100},onChange:e.onChangeSeverity,children:[Object(a.jsx)("option",{selected:0===e.edit_severity,value:"0",children:"Minor"}),Object(a.jsx)("option",{selected:1===e.edit_severity,value:"1",children:"Intermediate"}),Object(a.jsx)("option",{selected:2===e.edit_severity,value:"2",children:"Major"})]})}),Object(a.jsx)("td",{children:Object(a.jsxs)("select",{className:"form-control",style:{width:100},onChange:e.onChangeSuburb,children:[Object(a.jsx)("option",{selected:0===e.edit_suburb,value:"0",children:H(0)}),Object(a.jsx)("option",{selected:1===e.edit_suburb,value:"1",children:H(1)}),Object(a.jsx)("option",{selected:2===e.edit_suburb,value:"2",children:H(2)}),Object(a.jsx)("option",{selected:3===e.edit_suburb,value:"3",children:H(3)}),Object(a.jsx)("option",{selected:4===e.edit_suburb,value:"4",children:H(4)}),Object(a.jsx)("option",{selected:5===e.edit_suburb,value:"5",children:H(5)}),Object(a.jsx)("option",{selected:6===e.edit_suburb,value:"6",children:H(6)}),Object(a.jsx)("option",{selected:7===e.edit_suburb,value:"7",children:H(7)}),Object(a.jsx)("option",{selected:8===e.edit_suburb,value:"8",children:H(8)}),Object(a.jsx)("option",{selected:9===e.edit_suburb,value:"9",children:H(9)}),Object(a.jsx)("option",{selected:10===e.edit_suburb,value:"10",children:H(10)})]})}),Object(a.jsx)("td",{className:"text-muted",children:Object(a.jsx)("input",{type:"number",className:"form-control",value:e.edit_kmPost,onChange:e.onChangeKmPost,style:{width:80},min:"0",max:"127",step:".1"})}),Object(a.jsxs)("td",{children:[Object(a.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:function(){e.discardEdit()},children:Object(a.jsx)(y.a,{icon:k.b})}),"\xa0",Object(a.jsx)("button",{className:"btn btn-sm btn-success",onClick:function(){e.updateEvent(e.event.id,e.edit_eventDate,e.edit_eventTime,e.edit_type,e.edit_drivingSide,e.edit_severity,e.edit_kmPost,e.edit_suburb)},children:Object(a.jsx)(y.a,{icon:k.l})})]})]}):Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:z(e.event.datetime)}),Object(a.jsx)("td",{children:Y(e.event.datetime)}),Object(a.jsx)("td",{children:0===e.event.type?"Fallen Tree":1===e.event.type?"LandSlide":2===e.event.type?"Flooding":"Other"}),Object(a.jsx)("td",{children:e.event.drivingSide?"Matara":"Colombo"}),Object(a.jsx)("td",{children:0===e.event.severity?"Minor":1===e.event.severity?"Intermediate":"Major"}),Object(a.jsx)("td",{children:H(e.event.suburb)}),Object(a.jsx)("td",{children:e.event.kmPost}),Object(a.jsxs)("td",{children:[Object(a.jsx)("button",{className:"btn btn-sm btn-info",onClick:function(){e.editEvent(e.event)},children:Object(a.jsx)(y.a,{icon:k.f})}),Object(a.jsx)("button",{className:"btn btn-sm btn-danger",onClick:function(){e.deleteEvent(e.event.id)},children:Object(a.jsx)(y.a,{icon:k.o})})]})]})},Q=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).getList=Object(D.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("event/list");case 2:t=e.sent,a.setState({eventlist:t.data.data,updateFlag:!1}),console.log("state_set:"),console.log(t.data.data);case 6:case"end":return e.stop()}}),e)}))),a.editEvent=a.editEvent.bind(Object(u.a)(a)),a.updateEvent=a.updateEvent.bind(Object(u.a)(a)),a.discardEdit=a.discardEdit.bind(Object(u.a)(a)),a.deleteEvent=a.deleteEvent.bind(Object(u.a)(a)),a.refresh=a.refresh.bind(Object(u.a)(a)),a.onChangeEventDate=a.onChangeEventDate.bind(Object(u.a)(a)),a.onChangeEventTime=a.onChangeEventTime.bind(Object(u.a)(a)),a.onChangeEventType=a.onChangeEventType.bind(Object(u.a)(a)),a.onChangeDrivingSide=a.onChangeDrivingSide.bind(Object(u.a)(a)),a.onChangeSeverity=a.onChangeSeverity.bind(Object(u.a)(a)),a.onChangeKmPost=a.onChangeKmPost.bind(Object(u.a)(a)),a.onChangeSuburb=a.onChangeSuburb.bind(Object(u.a)(a)),a.handlePageChange=a.handlePageChange.bind(Object(u.a)(a)),a.state={updateFlag:!0,eventlist:[],loading:!0,pageSize:a.props.pageSize,currentPage:1},a}return Object(h.a)(n,[{key:"handlePageChange",value:function(e){this.setState({currentPage:e})}},{key:"componentDidMount",value:function(){var e=Object(D.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getList();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(D.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==this.state.updateFlag){e.next=3;break}return e.next=3,this.getList();case 3:console.log(this.state);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteEvent",value:function(){var e=Object(D.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.delete("event/delete/",{data:{id:t,sessionToken:this.props.token}}).then((function(e){console.log(e.data)}));case 2:this.refresh();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEvent",value:function(){var e=Object(D.a)(P.a.mark((function e(t,n,a,i,s,c,r,d){var o,l;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Update date format"),o=new Date(n),l=new Date(o.toISOString().replace(/(\d\d:\d\d)/,a).slice(0,-1)),console.log(o.toISOString()),console.log(a),console.log("update datetime:"),console.log(l),console.log("Update req:"),console.log(t+" "+l+" "+i),e.next=11,g.post("event/update/",{id:t,datetime:l,type:i,drivingSide:s,severity:c,kmPost:r,suburb:d,sessionToken:this.props.token}).then((function(e){console.log(e.data)}));case 11:this.setState({updateFlag:!0,edit_id:null,edit_eventDate:null,edit_eventTime:null,edit_type:null,edit_drivingSide:null,edit_severity:null,edit_kmPost:null,edit_suburb:null}),this.refresh();case 13:case"end":return e.stop()}}),e,this)})));return function(t,n,a,i,s,c,r,d){return e.apply(this,arguments)}}()},{key:"editEvent",value:function(){var e=Object(D.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({updateFlag:!0,edit_id:t.id,edit_eventDate:t.datetime,edit_eventTime:Y(t.datetime),edit_type:t.type,edit_drivingSide:t.drivingSide,edit_severity:t.severity,edit_kmPost:t.kmPost,edit_suburb:t.suburb});case 2:console.log("edited state:"),console.log(this.state);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"discardEdit",value:function(){this.setState({edit_id:null,edit_eventDate:null,edit_eventTime:null,edit_type:null,edit_drivingSide:null,edit_severity:null,edit_kmPost:null,edit_suburb:null,updateFlag:!0})}},{key:"refresh",value:function(){this.setState({updateFlag:!0})}},{key:"onChangeEventDate",value:function(e){this.setState({edit_eventDate:e.target.value})}},{key:"onChangeEventTime",value:function(e){this.setState({edit_eventTime:e.target.value})}},{key:"onChangeEventType",value:function(e){this.setState({edit_type:parseInt(e.target.value)})}},{key:"onChangeDrivingSide",value:function(e){this.setState({edit_drivingSide:"colombo"!==e.target.value})}},{key:"onChangeSeverity",value:function(e){this.setState({edit_severity:parseInt(e.target.value)})}},{key:"onChangeKmPost",value:function(e){this.setState({edit_kmPost:e.target.value})}},{key:"onChangeSuburb",value:function(e){switch(this.setState({edit_suburb:parseInt(e.target.value)}),parseInt(e.target.value)){case 0:this.setState({edit_kmPost:0});break;case 1:this.setState({edit_kmPost:5.9});break;case 2:this.setState({edit_kmPost:13.7});break;case 3:this.setState({edit_kmPost:34.8});break;case 4:this.setState({edit_kmPost:46});break;case 5:this.setState({edit_kmPost:67.6});break;case 6:this.setState({edit_kmPost:79.8});break;case 7:this.setState({edit_kmPost:95.3});break;case 8:this.setState({edit_kmPost:108});break;case 9:this.setState({edit_kmPost:116.5});break;case 10:this.setState({edit_kmPost:127})}}},{key:"eventList",value:function(e){var t=this;return e.map((function(e){return Object(a.jsx)(X,{event:e,deleteEvent:t.deleteEvent,editEvent:t.editEvent,updateEvent:t.updateEvent,discardEdit:t.discardEdit,onChangeEventDate:t.onChangeEventDate,onChangeEventTime:t.onChangeEventTime,onChangeEventType:t.onChangeEventType,onChangeDrivingSide:t.onChangeDrivingSide,onChangeSeverity:t.onChangeSeverity,onChangeKmPost:t.onChangeKmPost,onChangeSuburb:t.onChangeSuburb,edit_id:t.state.edit_id,edit_eventDate:t.state.edit_eventDate,edit_eventTime:t.state.edit_eventTime,edit_type:t.state.edit_type,edit_drivingSide:t.state.edit_drivingSide,edit_severity:t.state.edit_severity,edit_kmPost:t.state.edit_kmPost,edit_suburb:t.state.edit_suburb},e.id)}))}},{key:"render",value:function(){var e=this,t=this.state.eventlist.length,n=this.state,i=n.pageSize,s=n.currentPage,c=n.eventlist;if(this.state.updateFlag)return Object(a.jsx)(I,{});if(0===t)return Object(a.jsx)("p",{children:"There are no Events in the database"});var r=M(c,s,i);return Object(a.jsxs)("div",{children:[Object(a.jsxs)("h3",{children:[" ",Object(a.jsx)(y.a,{icon:k.h})," Event List\xa0",Object(a.jsx)("button",{className:"btn btn-sm btn-light",onClick:function(){e.refresh()},children:Object(a.jsx)(y.a,{icon:k.n})})]}),Object(a.jsxs)("table",{className:"table",children:[Object(a.jsx)("thead",{className:"thead-light",children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Date"}),Object(a.jsx)("th",{children:"Time"}),Object(a.jsx)("th",{children:"Type"}),Object(a.jsx)("th",{children:"Driving Side"}),Object(a.jsx)("th",{children:"Severity"}),Object(a.jsx)("th",{children:"Suburb"}),Object(a.jsx)("th",{children:"KM Post"}),Object(a.jsx)("th",{})]})}),Object(a.jsx)("tbody",{children:this.eventList(r)})]}),Object(a.jsx)(A,{itemsCount:t,pageSize:i,onPageChange:this.handlePageChange,currentPage:s})]})}}]),n}(i.Component),ee=(n(136),function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsxs)("td",{children:[z(e.incident.datetime),Object(a.jsx)("br",{}),Y(e.incident.datetime)]}),Object(a.jsx)("td",{children:e.incident.isAccident?"Accident":"Event"}),Object(a.jsx)("td",{children:e.incident.drivingSide?"Ma To Col":"Col to Mat"}),Object(a.jsx)("td",{children:e.incident.lat}),Object(a.jsx)("td",{children:e.incident.lng}),Object(a.jsx)("td",{children:F({latitude:e.incident.lat,longitude:e.incident.lng})}),Object(a.jsxs)("td",{children:[Object(a.jsx)("button",{className:"btn btn-sm btn-warning m-2",onClick:function(){e.validateIncident(e.incident)},children:"Validate"}),Object(a.jsx)("button",{className:"btn btn-sm btn-danger m-2",onClick:function(){e.deleteIncident(e.incident.id)},children:"Delete"})]})]})}),te=function(e){var t=e.show?"modal display-block":"modal display-none";return Object(a.jsx)("div",{className:t,children:Object(a.jsxs)("section",{className:"modal-main ",children:[Object(a.jsx)("button",{type:"button modal-close-btn",onClick:e.handleClose,children:"X"}),e.children]})})},ne=function(e){var t=e.show?"modal display-block":"modal display-none";return Object(a.jsx)("div",{className:t,children:Object(a.jsxs)("section",{className:"modal-main",children:[Object(a.jsx)("button",{type:"button modal-close-btn",onClick:e.handleClose,children:"X"}),e.children]})})},ae=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).showAccidentModal=function(){a.setState({showAccident:!0}),console.log("showing Accident Modal")},a.showEventModal=function(){a.setState({showEvent:!0}),console.log("showing Event Modal")},a.hideAccidentModal=function(){a.setState({showAccident:!1}),console.log("hiding Accident Modal")},a.hideEventModal=function(){a.setState({showEvent:!1}),console.log("showing Event Modal")},a.deleteIncident=a.deleteIncident.bind(Object(u.a)(a)),a.validateIncident=a.validateIncident.bind(Object(u.a)(a)),a.showAccidentModal=a.showAccidentModal.bind(Object(u.a)(a)),a.showEventModal=a.showEventModal.bind(Object(u.a)(a)),a.hideAccidentModal=a.hideAccidentModal.bind(Object(u.a)(a)),a.hideEventModal=a.hideEventModal.bind(Object(u.a)(a)),a.handlePageChange=a.handlePageChange.bind(Object(u.a)(a)),a.state={incidentlist:[],showAccident:!1,showEvent:!1,pageSize:a.props.pageSize,currentPage:1,verifiedAccident:{accidentDate:new Date,accidentTime:(new Date).toString().match(/(\d\d:\d\d)/)[0],driverAge:17,driverGender:!1,weather:!1,roadSurface:!1,vehicleType:0,vehicleYOM:(new Date).getFullYear(),licenseIssueDate:new Date,drivingSide:!1,severity:0,reason:0,kmPost:0,suburb:0,operatedSpeed:0,vehicle_condition:!1,token:a.props.token,res:""},verifiedEvent:{eventDate:new Date,eventTime:(new Date).toString().match(/(\d\d:\d\d)/)[0],type:0,drivingSide:!1,severity:0,kmPost:0,suburb:0,token:a.props.token,res:""}},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;g.get("incident/list").then((function(t){e.setState({incidentlist:t.data.data}),console.log(t.data.data)})).catch((function(e){console.log(e)}))}},{key:"handlePageChange",value:function(e){this.setState({currentPage:e})}},{key:"validateIncident",value:function(){var e=Object(D.a)(P.a.mark((function e(t){var n,a,i,s,c,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=parseFloat(t.lat),a=parseFloat(t.lng),i=W(F({latitude:n,longitude:a})),s=B(i),!t.isAccident){e.next=11;break}return c={accidentDate:new Date(Date.parse(t.datetime)),accidentTime:new Date(Date.parse(t.datetime)).toString().match(/(\d\d:\d\d)/)[0],driverAge:17,driverGender:!1,weather:!1,roadSurface:!1,vehicleType:0,vehicleYOM:(new Date).getFullYear(),licenseIssueDate:new Date,drivingSide:t.drivingSide,severity:0,reason:0,kmPost:s,suburb:i,operatedSpeed:0,vehicle_condition:!1,token:this.props.token,res:""},e.next=8,this.setState({verifiedAccident:c},(function(){console.log("updated accident")}));case 8:this.showAccidentModal(),e.next=15;break;case 11:return r={eventDate:new Date(Date.parse(t.datetime)),eventTime:new Date(Date.parse(t.datetime)).toString().match(/(\d\d:\d\d)/)[0],type:0,drivingSide:t.drivingSide,severity:0,kmPost:s,suburb:i,token:this.props.token,res:""},e.next=14,this.setState({verifiedEvent:r},(function(){console.log("updated event")}));case 14:this.showEventModal();case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteIncident",value:function(e){g.delete("incident/police/delete/",{data:{id:e,sessionToken:this.props.token}}).then((function(t){console.log("id:",e),console.log(t.data)})),this.setState({incidentlist:this.state.incidentlist.filter((function(t){return t.id!==e}))})}},{key:"incidentlist",value:function(e){var t=this;return e.map((function(e){return Object(a.jsx)(ee,{incident:e,deleteIncident:t.deleteIncident,validateIncident:t.validateIncident},e.id)}))}},{key:"render",value:function(){var e=this.state.incidentlist.length,t=this.state,n=t.pageSize,i=t.currentPage,s=t.incidentlist;if(0===e)return Object(a.jsx)(I,{});var c=M(s,i,n);return Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Incident List"}),Object(a.jsxs)("table",{className:"table",children:[Object(a.jsx)("thead",{className:"thead-light",children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Date/Time"}),Object(a.jsx)("th",{children:"Incident Type"}),Object(a.jsx)("th",{children:"Driving Side"}),Object(a.jsx)("th",{children:"Lat"}),Object(a.jsx)("th",{children:"Lng"}),Object(a.jsx)("th",{children:"Suburb"}),Object(a.jsx)("th",{children:"Actions"})]})}),Object(a.jsx)("tbody",{children:this.incidentlist(c)})]}),Object(a.jsx)(te,{show:this.state.showAccident,handleClose:this.hideAccidentModal,children:Object(a.jsx)(U,{token:this.props.token,accident:this.state.verifiedAccident,isModal:!0})}),Object(a.jsx)(ne,{show:this.state.showEvent,handleClose:this.hideEventModal,children:Object(a.jsx)(Z,{token:this.props.token,event:this.state.verifiedEvent,isModal:!0})}),Object(a.jsx)(A,{itemsCount:e,pageSize:n,onPageChange:this.handlePageChange,currentPage:i})]})}}]),n}(i.Component),ie=function(e){return e.holiday.id===e.edit_id?Object(a.jsxs)("tr",{className:"table-secondary",children:[Object(a.jsx)("td",{children:Object(a.jsx)("input",{type:"text",required:!0,className:"form-control",value:e.edit_name,onChange:e.onChangeEditName,minlength:"4"})}),Object(a.jsxs)("td",{children:[z(e.edit_date),Object(a.jsx)("input",{type:"date",value:e.edit_date,onChange:e.onChangeEditDate})]}),Object(a.jsxs)("td",{children:[Object(a.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:function(){e.discardEdit()},children:Object(a.jsx)(y.a,{icon:k.b})}),"\xa0",Object(a.jsx)("button",{className:"btn btn-sm btn-success",onClick:function(){e.updateHoliday(e.holiday.id,e.edit_name,e.edit_date)},children:Object(a.jsx)(y.a,{icon:k.l})})]})]}):Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:e.holiday.name}),Object(a.jsx)("td",{children:z(e.holiday.date)}),Object(a.jsxs)("td",{children:[Object(a.jsx)("button",{className:"btn btn-sm btn-info",onClick:function(){e.editHoliday(e.holiday)},children:Object(a.jsx)(y.a,{icon:k.f})}),"\xa0",Object(a.jsx)("button",{className:"btn btn-sm btn-danger",onClick:function(){e.deleteHoliday(e.holiday.id)},children:Object(a.jsx)(y.a,{icon:k.o})})]})]})},se=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;Object(l.a)(this,n),(a=t.call(this,e)).getList=Object(D.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("holiday/list");case 2:t=e.sent,a.setState({holidaylist:t.data.data,updateFlag:!1}),console.log("state_set:"),console.log(t.data.data);case 6:case"end":return e.stop()}}),e)}))),a.deleteHoliday=a.deleteHoliday.bind(Object(u.a)(a)),a.editHoliday=a.editHoliday.bind(Object(u.a)(a)),a.updateHoliday=a.updateHoliday.bind(Object(u.a)(a)),a.discardEdit=a.discardEdit.bind(Object(u.a)(a)),a.onChangeEditName=a.onChangeEditName.bind(Object(u.a)(a)),a.onChangeEditDate=a.onChangeEditDate.bind(Object(u.a)(a)),a.refresh=a.refresh.bind(Object(u.a)(a)),a.onChangeHolidayDate=a.onChangeHolidayDate.bind(Object(u.a)(a)),a.onChangeName=a.onChangeName.bind(Object(u.a)(a)),a.onSubmit=a.onSubmit.bind(Object(u.a)(a)),a.handlePageChange=a.handlePageChange.bind(Object(u.a)(a));var i=new Date;return a.state={holidaylist:[],loading:!0,edit_id:null,holidayDate:i,name:"",token:a.props.token,res:"",pageSize:a.props.pageSize,currentPage:1,updateFlag:!0},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(D.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getList();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handlePageChange",value:function(e){this.setState({currentPage:e})}},{key:"componentDidUpdate",value:function(){var e=Object(D.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==this.state.updateFlag){e.next=3;break}return e.next=3,this.getList();case 3:console.log(this.state);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteHoliday",value:function(){var e=Object(D.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.delete("holiday/delete/",{data:{id:t,sessionToken:this.props.token}}).then((function(e){console.log(e.data)}));case 2:this.setState({updateFlag:!0}),this.refresh();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateHoliday",value:function(){var e=Object(D.a)(P.a.mark((function e(t,n,a){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.post("holiday/update/",{id:t,name:n,date:a,sessionToken:this.props.token}).then((function(e){console.log(e.data)}));case 2:this.setState({updateFlag:!0,edit_id:null,edit_name:null,edit_date:null}),this.refresh();case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"editHoliday",value:function(e){this.setState({edit_id:e.id,edit_name:e.name,edit_date:e.date,updateFlag:!0})}},{key:"discardEdit",value:function(){this.setState({edit_id:null,edit_name:null,edit_date:null,updateFlag:!0})}},{key:"refresh",value:function(){this.setState({updateFlag:!0})}},{key:"onChangeEditName",value:function(e){this.setState({edit_name:e.target.value})}},{key:"onChangeEditDate",value:function(e){this.setState({edit_date:e.target.value})}},{key:"onChangeHolidayDate",value:function(e){this.setState({holidayDate:e})}},{key:"onChangeName",value:function(e){this.setState({name:e.target.value,res:""})}},{key:"onSubmit",value:function(){var e=Object(D.a)(P.a.mark((function e(t){var n,a,i=this;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=new Date,this.state.holidayDate instanceof Date){e.next=6;break}this.setState({res:"Validation Error: Date is invalid",holidayDate:n,name:""}),e.next=9;break;case 6:return a={date:this.state.holidayDate.toString().replace(/(\d\d:\d\d:\d\d)/,"00:00:00"),name:this.state.name,sessionToken:this.state.token},e.next=9,g.post("holiday/add",a).then((function(e){document.getElementById("holiday-report-form").reset(),i.setState({res:e.data.message,holidayDate:n,name:""})}));case 9:this.refresh();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"holidayList",value:function(e){var t=this;return e.map((function(e){return Object(a.jsx)(ie,{holiday:e,deleteHoliday:t.deleteHoliday,editHoliday:t.editHoliday,updateHoliday:t.updateHoliday,discardEdit:t.discardEdit,onChangeEditName:t.onChangeEditName,onChangeEditDate:t.onChangeEditDate,edit_id:t.state.edit_id,edit_name:t.state.edit_name,edit_date:t.state.edit_date},e.id)}))}},{key:"render",value:function(){var e=this,t=this.state.holidaylist.length,n=this.state,i=n.pageSize,s=n.currentPage,c=n.holidaylist;if(this.state.updateFlag)return Object(a.jsx)(I,{});if(0===t)return Object(a.jsx)("p",{children:"There are no Public Holidays in the database"});var r=M(c,s,i);return Object(a.jsxs)("div",{className:"container w-100",children:[Object(a.jsxs)("h3",{children:[" ",Object(a.jsx)(y.a,{icon:k.c})," Public Holiday"]}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-xs-12 col-md-6",children:Object(a.jsx)("div",{className:"add-holiday",children:Object(a.jsxs)("form",{id:"holiday-report-form",onSubmit:this.onSubmit,children:[Object(a.jsx)("div",{className:"header",children:Object(a.jsx)("h5",{children:"Add Public Holiday "})}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("div",{className:"col-sm-12",children:Object(a.jsx)("label",{children:"Holiday Date: "})}),Object(a.jsx)("div",{className:"col-sm-12",children:Object(a.jsx)("div",{children:Object(a.jsx)(V.a,{className:"form-control",selected:this.state.holidayDate,onChange:this.onChangeHolidayDate})})})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("div",{className:"col-sm-12",children:Object(a.jsx)("label",{children:"Name"})}),Object(a.jsx)("div",{className:"col-sm-12",children:Object(a.jsx)("input",{type:"text",className:"form-control input-sm",value:this.state.name,onChange:this.onChangeName})})]}),Object(a.jsxs)("div",{className:"form",children:[Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"submit",value:"Add holiday",onSubmit:this.onSubmit,className:"btn btn-primary"})," ",this.state.res,Object(a.jsx)("div",{children:Object(a.jsx)("br",{})})]})]})]})})}),Object(a.jsxs)("div",{className:"col-xs-12 col-md-6",children:[Object(a.jsxs)("table",{className:"table table-bordered",children:[Object(a.jsxs)("thead",{className:"thead-light",children:[Object(a.jsx)("tr",{children:Object(a.jsxs)("th",{colspan:"3",children:["Holiday List\xa0",Object(a.jsx)("button",{className:"btn btn-sm btn-light",onClick:function(){e.refresh()},children:Object(a.jsx)(y.a,{icon:k.n})})]})}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Name"}),Object(a.jsx)("th",{children:"Date"}),Object(a.jsx)("th",{children:"Actions"})]})]}),Object(a.jsx)("tbody",{children:this.holidayList(r)})]}),Object(a.jsx)(A,{itemsCount:t,pageSize:i,onPageChange:this.handlePageChange,currentPage:s})]})]})]})}}]),n}(i.Component),ce=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onChangePassword=a.onChangePassword.bind(Object(u.a)(a)),a.onSubmit=a.onSubmit.bind(Object(u.a)(a)),a.state={oldpassword:"",password:"",password2:"",token:a.props.token,res:""},a}return Object(h.a)(n,[{key:"onChangePassword",value:function(e,t){1==e?this.setState({password:t.target.value,res:""}):2==e?this.setState({password2:t.target.value,res:""}):this.setState({oldpassword:t.target.value,res:""})}},{key:"onSubmit",value:function(e){var t=this;if(e.preventDefault(),this.state.password===this.state.password2){var n={oldpassword:this.state.oldpassword,newpassword:this.state.password,sessionToken:this.state.token};g.post("police/changepassword",n).then((function(e){t.setState({res:e.data.message,oldpassword:"",password:"",password2:""})}))}else this.setState({res:"Passwords mismatched. Please re-check."})}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Change Password"}),Object(a.jsx)("form",{onSubmit:this.onSubmit,children:Object(a.jsxs)("div",{class:"form-col",children:[Object(a.jsxs)("div",{className:"form-group col-sm-9 col-md-7 col-lg-6 col-xl-4",children:[Object(a.jsx)("label",{children:"Old password: "}),Object(a.jsx)("input",{type:"password",required:!0,className:"form-control",value:this.state.oldpassword,onChange:function(t){return e.onChangePassword(0,t)},minlength:"4",maxlength:"20"})]}),Object(a.jsxs)("div",{className:"form-group col-sm-9 col-md-7 col-lg-6 col-xl-4",children:[Object(a.jsx)("label",{children:"Password: "}),Object(a.jsx)("input",{type:"password",required:!0,className:"form-control",value:this.state.password,onChange:function(t){return e.onChangePassword(1,t)},minlength:"4",maxLength:"20"})]}),Object(a.jsxs)("div",{className:"form-group col-sm-9 col-md-7 col-lg-6 col-xl-4",children:[Object(a.jsx)("label",{children:"Re-Enter Password: "}),Object(a.jsx)("input",{type:"password",required:!0,className:"form-control",value:this.state.password2,onChange:function(t){return e.onChangePassword(2,t)},minlength:"4",maxLength:"20"})]}),Object(a.jsx)("div",{className:"form-group col-sm-9 col-md-7 col-lg-6 col-xl-4",children:Object(a.jsx)("input",{type:"submit",value:"Change Password",className:"btn btn-primary"})})]})}),Object(a.jsx)("div",{children:this.state.res})]})}}]),n}(i.Component),re=function(e){return e.police.username===e.edit_username?Object(a.jsxs)("tr",{className:"table-secondary",children:[Object(a.jsx)("td",{children:e.police.username}),Object(a.jsx)("td",{children:Object(a.jsx)("input",{type:"text",required:!0,className:"form-control",value:e.edit_name,onChange:e.onChangeName,minlength:"4",pattern:"[\\W\\w\\s]+"})}),Object(a.jsx)("td",{children:Object(a.jsx)("input",{type:"checkbox",value:e.edit_adminRights,checked:e.edit_adminRights,onChange:e.onChangeAdminRights})}),Object(a.jsxs)("td",{children:[Object(a.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:function(){e.discardEdit()},children:Object(a.jsx)(y.a,{icon:k.b})}),"\xa0",Object(a.jsx)("button",{className:"btn btn-sm btn-success",onClick:function(){e.updatePolice(e.police.username,e.edit_name,e.edit_adminRights)},children:Object(a.jsx)(y.a,{icon:k.l})})]})]}):Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:e.police.username}),Object(a.jsx)("td",{children:e.police.name}),Object(a.jsx)("td",{children:e.police.adminRights?"Admin":"User"}),Object(a.jsxs)("td",{children:[Object(a.jsx)("button",{className:"btn btn-sm btn-info",onClick:function(){e.editPolice(e.police)},children:Object(a.jsx)(y.a,{icon:k.f})}),"\xa0",Object(a.jsx)("button",{className:"btn btn-sm btn-danger",onClick:function(){e.deletePolice(e.police.username)},children:Object(a.jsx)(y.a,{icon:k.o})})]})]})},de=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).getList=Object(D.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("police/list");case 2:t=e.sent,a.setState({policelist:t.data.data,updateFlag:!1}),console.log("state_set:"),console.log(t.data.data);case 6:case"end":return e.stop()}}),e)}))),a.deletePolice=a.deletePolice.bind(Object(u.a)(a)),a.editPolice=a.editPolice.bind(Object(u.a)(a)),a.updatePolice=a.updatePolice.bind(Object(u.a)(a)),a.discardEdit=a.discardEdit.bind(Object(u.a)(a)),a.onChangeName=a.onChangeName.bind(Object(u.a)(a)),a.onChangeAdminRights=a.onChangeAdminRights.bind(Object(u.a)(a)),a.refresh=a.refresh.bind(Object(u.a)(a)),a.handlePageChange=a.handlePageChange.bind(Object(u.a)(a)),a.state={policelist:[],updateFlag:!0,edit_username:null,pageSize:a.props.pageSize,currentPage:1},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(D.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getList();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handlePageChange",value:function(e){this.setState({currentPage:e})}},{key:"componentDidUpdate",value:function(){var e=Object(D.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==this.state.updateFlag){e.next=3;break}return e.next=3,this.getList();case 3:console.log(this.state);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deletePolice",value:function(){var e=Object(D.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.delete("police/delete/",{data:{username:t,sessionToken:this.props.token}}).then((function(e){console.log(e.data)}));case 2:this.setState({updateFlag:!0}),this.refresh();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updatePolice",value:function(){var e=Object(D.a)(P.a.mark((function e(t,n,a){var i=this;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.post("police/update/",{username:t,name:n,adminRights:a,sessionToken:this.props.token}).then((function(e){console.log(e.data),console.log("token:"+i.props.token)}));case 2:this.setState({updateFlag:!0,edit_username:null,edit_name:null,edit_adminRights:null}),this.refresh();case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"editPolice",value:function(e){this.setState({edit_username:e.username,edit_name:e.name,edit_adminRights:e.adminRights,updateFlag:!0})}},{key:"discardEdit",value:function(){this.setState({edit_username:null,edit_name:null,edit_adminRights:null,updateFlag:!0})}},{key:"refresh",value:function(){this.setState({updateFlag:!0})}},{key:"onChangeName",value:function(e){var t=e.target.value,n=/^[A-Za-z ]+$/;console.log(n.test(t)),n.test(t)&&this.setState({edit_name:e.target.value})}},{key:"onChangeAdminRights",value:function(e){this.setState({edit_adminRights:e.target.checked})}},{key:"policeList",value:function(e){var t=this;return e.map((function(e){return Object(a.jsx)(re,{police:e,deletePolice:t.deletePolice,editPolice:t.editPolice,updatePolice:t.updatePolice,discardEdit:t.discardEdit,onChangeName:t.onChangeName,onChangeAdminRights:t.onChangeAdminRights,edit_username:t.state.edit_username,edit_name:t.state.edit_name,edit_adminRights:t.state.edit_adminRights},e.username)}))}},{key:"render",value:function(){var e=this,t=this.state.policelist.length,n=this.state,i=n.pageSize,s=n.currentPage,c=n.policelist;if(this.state.updateFlag)return Object(a.jsx)(I,{});if(0===t)return Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:"No police users available."})});var r=M(c,s,i);return Object(a.jsxs)("div",{children:[Object(a.jsxs)("h3",{children:[" ",Object(a.jsx)(y.a,{icon:k.s})," Police List\xa0",Object(a.jsx)("button",{className:"btn btn-sm btn-light",onClick:function(){e.refresh()},children:Object(a.jsx)(y.a,{icon:k.n})})]}),Object(a.jsxs)("table",{className:"table",children:[Object(a.jsx)("thead",{className:"thead-light",children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Username"}),Object(a.jsx)("th",{children:"Name"}),Object(a.jsx)("th",{children:"Admin Rights"}),Object(a.jsx)("th",{children:"Actions"})]})}),Object(a.jsx)("tbody",{children:this.policeList(r)})]}),Object(a.jsx)(A,{itemsCount:t,pageSize:i,onPageChange:this.handlePageChange,currentPage:s})]})}}]),n}(i.Component),oe=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=new Date,t={accidentDate:e,accidentTime:e.toString().match(/(\d\d:\d\d)/)[0],driverAge:17,driverGender:!1,weather:!1,roadSurface:!1,vehicleType:0,vehicleYOM:e.getFullYear(),licenseIssueDate:e,drivingSide:!1,severity:0,reason:0,kmPost:0,suburb:0,operatedSpeed:0,vehicle_condition:!1,token:this.props.token,res:""},n={eventDate:e,eventTime:e.toString().match(/(\d\d:\d\d)/)[0],type:0,drivingSide:!1,severity:0,kmPost:0,suburb:0,token:this.props.token,res:""};switch(this.props.nav){case"addpolice":return Object(a.jsx)(_,{token:this.props.token});case"addeteam":return Object(a.jsx)(N,{token:this.props.token});case"eteamlist":return Object(a.jsx)(G,{token:this.props.token,pageSize:5});case"accidentsubmission":return Object(a.jsx)(U,{token:this.props.token,accident:t,isModal:!1});case"accidentlist":return Object(a.jsx)(J,{token:this.props.token,pageSize:3.5});case"eventsubmission":return Object(a.jsx)(Z,{token:this.props.token,event:n,isModal:!1});case"eventlist":return Object(a.jsx)(Q,{token:this.props.token,pageSize:5});case"incidentlist":return Object(a.jsx)(ae,{token:this.props.token,pageSize:5});case"policelist":return Object(a.jsx)(de,{token:this.props.token,pageSize:5});case"holiday":return Object(a.jsx)(se,{token:this.props.token,pageSize:5});case"changepassword":return Object(a.jsx)(ce,{token:this.props.token});default:return Object(a.jsxs)("h1",{children:[this.props.nav," "]})}}}]),n}(s.a.Component),le=(n(137),n(151)),he=n(152),ue=n.p+"static/media/signin1.9dc61341.svg";function je(e){if(console.log("getFromStorage called"),!e)return null;try{var t=sessionStorage.getItem(e);return t?JSON.parse(t):null}catch(n){return console.log("getFromStorage error"),null}}var be=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onTextboxChangeUsername=a.onTextboxChangeUsername.bind(Object(u.a)(a)),a.onTextboxChangePassword=a.onTextboxChangePassword.bind(Object(u.a)(a)),a.onSignin=a.onSignin.bind(Object(u.a)(a)),a.state={isLoading:!0,token:"",signInError:"",signInUsername:"",signInPassword:"",validUsername:!1,validPassword:!1,activateSubmit:!1},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("cmpont mounted"),je("road_accident_prevention_system_webtoken")&&this.setState({isLoading:!1})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.token,i=e.signInError,s=e.signInUsername,c=e.signInPassword,r=e.activateSubmit;return t?Object(a.jsx)("div",{className:"loading",children:Object(a.jsx)("svg",{children:Object(a.jsx)("circle",{r:"40",cx:"150",cy:"75",stroke:"#999","stroke-width":"10px",fill:"none"})})}):n?void 0:Object(a.jsx)("div",{className:"content",children:Object(a.jsx)("div",{className:"background",children:Object(a.jsx)("div",{className:"",children:Object(a.jsx)(le.a,{children:Object(a.jsxs)(he.a,{children:[Object(a.jsxs)("div",{className:"col-md-6",children:[Object(a.jsx)(he.a,{children:Object(a.jsxs)("div",{className:"title mx-auto",children:[Object(a.jsx)("img",{src:v,width:"30",height:"30",className:"d-inline-block align-top",alt:"RAPS icon"})," Road Accident Prevention System"]})}),Object(a.jsx)("img",{className:"sign-img d-none d-md-inline",src:ue,height:"350vh"})]}),Object(a.jsx)("div",{className:"col-md-6 mt-5",children:Object(a.jsx)("div",{className:"formside",children:Object(a.jsxs)("div",{className:"form-inside form-button",children:[Object(a.jsxs)("form",{children:[Object(a.jsx)("h3",{children:"Sign in"}),Object(a.jsx)("div",{className:"form-groupone",children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)(y.a,{className:"icons",icon:k.p})}),Object(a.jsx)("td",{children:Object(a.jsx)("input",{type:"text",className:"forminput",value:s,onChange:this.onTextboxChangeUsername,placeholder:"Username"})})]})}),Object(a.jsx)("div",{className:"form-groupone",children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)(y.a,{className:"icons",icon:k.j})}),Object(a.jsx)("td",{children:Object(a.jsx)("input",{type:"password",className:"forminput",value:c,onChange:this.onTextboxChangePassword,placeholder:"Password"})})]})}),Object(a.jsx)("div",{className:"signInError",children:Object(a.jsxs)("p",{className:"d-block text-danger",children:["\xa0",i]})})]}),Object(a.jsx)("button",{className:"btn btn-signin btn-block signin",disabled:!r,onClick:this.onSignin,children:"Sign in"}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{})]})]})})})]})})})})})}},{key:"onTextboxChangeUsername",value:function(e){var t=e.target.value.length>=4,n=this.state.signInPassword.length>=4;this.setState({signInUsername:e.target.value,validUsername:t,activateSubmit:n&&t})}},{key:"onTextboxChangePassword",value:function(e){var t=e.target.value.length>=4,n=this.state.signInUsername.length>=4;this.setState({signInPassword:e.target.value,validPassword:t,activateSubmit:n&&t})}},{key:"onSignin",value:function(){var e=this;g.post("http://localhost:5000/police/signin",{username:this.state.signInUsername,password:this.state.signInPassword}).then((function(e){return e.data})).then((function(t){t.success?(!function(e,t){console.log("setInStorage called");try{sessionStorage.setItem(e,JSON.stringify(t))}catch(n){console.error("Error: Cannot save to local storage (setInStorage)")}}("road_accident_prevention_system_webtoken",t.token),e.props.handleSignIn(t.adminRights,t.token)):e.setState({signInError:t.message})}))}}]),n}(i.Component),me=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).handleNavigation=e.handleNavigation.bind(Object(u.a)(e)),e.handleSignIn=e.handleSignIn.bind(Object(u.a)(e)),e.handleLogOut=e.handleLogOut.bind(Object(u.a)(e)),e.verifySession=e.verifySession.bind(Object(u.a)(e)),e.state={signedin:!1,loading:!1,data:{},token:0,nav:"accidentsubmission"},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.verifySession()}},{key:"verifySession",value:function(){var e=this;this.setState({loading:!0});var t=je("road_accident_prevention_system_webtoken");console.log("token:"+t),g.get("police/verifysession/",{params:{token:t}}).then((function(e){return e.data})).then((function(n){n.success?e.setState({signedin:!0,loading:!1,adminRights:n.adminRights,token:t}):e.setState({signedin:!1,loading:!1})}))}},{key:"handleNavigation",value:function(e){this.setState({nav:e})}},{key:"handleSignIn",value:function(e,t){this.setState({signedin:!0,adminRights:e,token:t,nav:"accidentsubmission"})}},{key:"handleLogOut",value:function(e){this.setState({signedin:!1,adminRights:null,token:null,nav:"accidentsubmission"})}},{key:"render",value:function(){return this.state.loading?Object(a.jsx)("div",{children:Object(a.jsx)(I,{})}):this.state.signedin?Object(a.jsxs)("div",{children:[Object(a.jsx)(S,{adminRights:this.state.adminRights,token:this.state.token,navState:this.state.nav,handleNavigation:this.handleNavigation,handleLogOut:this.handleLogOut}),Object(a.jsx)("div",{className:"content",children:Object(a.jsx)(oe,{nav:this.state.nav,token:this.state.token})})]}):Object(a.jsx)("div",{children:Object(a.jsx)(be,{handleSignIn:this.handleSignIn})})}}]),n}(i.Component);var ge=function(){return Object(a.jsx)(d.a,{children:Object(a.jsx)("div",{className:"",children:Object(a.jsx)(o.a,{path:"/",component:me})})})};n(140);r.a.render(Object(a.jsx)(ge,{className:"app"}),document.getElementById("root"))}},[[141,1,2]]]);
//# sourceMappingURL=main.73fd2b41.chunk.js.map